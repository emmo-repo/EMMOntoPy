
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the EMMOntoPy library">
      
      
      
        <link rel="canonical" href="https://emmo-repo.github.io/EMMOntoPy/latest/api_reference/ontopy/ontology/">
      
      
        <link rel="prev" href="../ontodoc/">
      
      
        <link rel="next" href="../patch/">
      
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>ontology - EMMOntoPy</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/reference.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ontology" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="EMMOntoPy" class="md-header__button md-logo" aria-label="EMMOntoPy" data-md-component="logo">
      
  <img src="../../../images/emmontopy-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EMMOntoPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ontology
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/emmo-repo/EMMOntoPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    EMMOntoPy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="EMMOntoPy" class="md-nav__button md-logo" aria-label="EMMOntoPy" data-md-component="logo">
      
  <img src="../../../images/emmontopy-logo.svg" alt="logo">

    </a>
    EMMOntoPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/emmo-repo/EMMOntoPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    EMMOntoPy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools-instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../docker-instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../LICENSE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples and demonstrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Examples and demonstrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Demo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Demo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EMMO use cases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../demo/horizontal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EMMO use case for horizontal interoperability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../demo/vertical/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EMMO use case for vertical interoperability
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/emmodoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EMMOdoc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/jupyter-visualization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter visualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/ontology-from-excel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ontology generation from Excel
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developers/release-instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Steps for creating a new release
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developers/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developers/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing and tooling
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    emmopy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            emmopy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../emmopy/emmocheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    emmocheck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../emmopy/emmopy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    emmopy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" checked>
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ontopy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            ontopy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../colortest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    colortest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../excelparser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    excelparser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    graph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manchester/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    manchester
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nadict/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nadict
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ontodoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ontodoc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ontology
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ontology
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology" class="md-nav__link">
    <span class="md-ellipsis">
      ontopy.ontology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.BlankNode" class="md-nav__link">
    <span class="md-ellipsis">
      BlankNode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlankNode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.BlankNode.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology" class="md-nav__link">
    <span class="md-ellipsis">
      Ontology
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ontology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.colon_in_label" class="md-nav__link">
    <span class="md-ellipsis">
      colon_in_label
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_imported" class="md-nav__link">
    <span class="md-ellipsis">
      dir_imported
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_label" class="md-nav__link">
    <span class="md-ellipsis">
      dir_label
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_name" class="md-nav__link">
    <span class="md-ellipsis">
      dir_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_preflabel" class="md-nav__link">
    <span class="md-ellipsis">
      dir_preflabel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.add_label_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      add_label_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.annotation_properties" class="md-nav__link">
    <span class="md-ellipsis">
      annotation_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.classes" class="md-nav__link">
    <span class="md-ellipsis">
      classes()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.closest_common_ancestor" class="md-nav__link">
    <span class="md-ellipsis">
      closest_common_ancestor()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.closest_common_ancestors" class="md-nav__link">
    <span class="md-ellipsis">
      closest_common_ancestors()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.common_ancestors" class="md-nav__link">
    <span class="md-ellipsis">
      common_ancestors()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.data_properties" class="md-nav__link">
    <span class="md-ellipsis">
      data_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_ancestors" class="md-nav__link">
    <span class="md-ellipsis">
      get_ancestors()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      get_annotations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_branch" class="md-nav__link">
    <span class="md-ellipsis">
      get_branch()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_by_label" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_label()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_by_label_all" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_label_all()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_descendants" class="md-nav__link">
    <span class="md-ellipsis">
      get_descendants()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_entities()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_graph" class="md-nav__link">
    <span class="md-ellipsis">
      get_graph()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_imported_ontologies" class="md-nav__link">
    <span class="md-ellipsis">
      get_imported_ontologies()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_relations" class="md-nav__link">
    <span class="md-ellipsis">
      get_relations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_root_classes" class="md-nav__link">
    <span class="md-ellipsis">
      get_root_classes()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_root_data_properties" class="md-nav__link">
    <span class="md-ellipsis">
      get_root_data_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_root_object_properties" class="md-nav__link">
    <span class="md-ellipsis">
      get_root_object_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_roots" class="md-nav__link">
    <span class="md-ellipsis">
      get_roots()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_unabbreviated_triples" class="md-nav__link">
    <span class="md-ellipsis">
      get_unabbreviated_triples()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_version()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_wu_palmer_measure" class="md-nav__link">
    <span class="md-ellipsis">
      get_wu_palmer_measure()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.individuals" class="md-nav__link">
    <span class="md-ellipsis">
      individuals()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.is_defined" class="md-nav__link">
    <span class="md-ellipsis">
      is_defined()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.is_individual" class="md-nav__link">
    <span class="md-ellipsis">
      is_individual()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.load" class="md-nav__link">
    <span class="md-ellipsis">
      load()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.load--arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_annotation_property" class="md-nav__link">
    <span class="md-ellipsis">
      new_annotation_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_class" class="md-nav__link">
    <span class="md-ellipsis">
      new_class()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_data_property" class="md-nav__link">
    <span class="md-ellipsis">
      new_data_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_entity" class="md-nav__link">
    <span class="md-ellipsis">
      new_entity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_object_property" class="md-nav__link">
    <span class="md-ellipsis">
      new_object_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.number_of_generations" class="md-nav__link">
    <span class="md-ellipsis">
      number_of_generations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.object_properties" class="md-nav__link">
    <span class="md-ellipsis">
      object_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.remove_label_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      remove_label_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.rename_entities" class="md-nav__link">
    <span class="md-ellipsis">
      rename_entities()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.save" class="md-nav__link">
    <span class="md-ellipsis">
      save()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="save()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.save--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.set_common_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      set_common_prefix()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.set_default_label_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      set_default_label_annotations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.set_version" class="md-nav__link">
    <span class="md-ellipsis">
      set_version()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.sync_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      sync_attributes()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.sync_python_names" class="md-nav__link">
    <span class="md-ellipsis">
      sync_python_names()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.sync_reasoner" class="md-nav__link">
    <span class="md-ellipsis">
      sync_reasoner()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.World" class="md-nav__link">
    <span class="md-ellipsis">
      World
    </span>
  </a>
  
    <nav class="md-nav" aria-label="World">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.World.get_ontology" class="md-nav__link">
    <span class="md-ellipsis">
      get_ontology()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.World.get_unabbreviated_triples" class="md-nav__link">
    <span class="md-ellipsis">
      get_unabbreviated_triples()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.flatten" class="md-nav__link">
    <span class="md-ellipsis">
      flatten()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.get_ontology" class="md-nav__link">
    <span class="md-ellipsis">
      get_ontology()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    patch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2_10" >
        
          
          <label class="md-nav__link" for="__nav_8_2_10" id="__nav_8_2_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    factpluspluswrapper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_10">
            <span class="md-nav__icon md-icon"></span>
            factpluspluswrapper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factpluspluswrapper/factppgraph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    factppgraph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factpluspluswrapper/owlapi_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    owlapi_interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factpluspluswrapper/sync_factpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sync_factpp
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology" class="md-nav__link">
    <span class="md-ellipsis">
      ontopy.ontology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.BlankNode" class="md-nav__link">
    <span class="md-ellipsis">
      BlankNode
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlankNode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.BlankNode.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology" class="md-nav__link">
    <span class="md-ellipsis">
      Ontology
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ontology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.colon_in_label" class="md-nav__link">
    <span class="md-ellipsis">
      colon_in_label
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_imported" class="md-nav__link">
    <span class="md-ellipsis">
      dir_imported
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_label" class="md-nav__link">
    <span class="md-ellipsis">
      dir_label
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_name" class="md-nav__link">
    <span class="md-ellipsis">
      dir_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.dir_preflabel" class="md-nav__link">
    <span class="md-ellipsis">
      dir_preflabel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.add_label_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      add_label_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.annotation_properties" class="md-nav__link">
    <span class="md-ellipsis">
      annotation_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.classes" class="md-nav__link">
    <span class="md-ellipsis">
      classes()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.closest_common_ancestor" class="md-nav__link">
    <span class="md-ellipsis">
      closest_common_ancestor()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.closest_common_ancestors" class="md-nav__link">
    <span class="md-ellipsis">
      closest_common_ancestors()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.common_ancestors" class="md-nav__link">
    <span class="md-ellipsis">
      common_ancestors()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.data_properties" class="md-nav__link">
    <span class="md-ellipsis">
      data_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_ancestors" class="md-nav__link">
    <span class="md-ellipsis">
      get_ancestors()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      get_annotations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_branch" class="md-nav__link">
    <span class="md-ellipsis">
      get_branch()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_by_label" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_label()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_by_label_all" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_label_all()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_descendants" class="md-nav__link">
    <span class="md-ellipsis">
      get_descendants()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_entities()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_graph" class="md-nav__link">
    <span class="md-ellipsis">
      get_graph()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_imported_ontologies" class="md-nav__link">
    <span class="md-ellipsis">
      get_imported_ontologies()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_relations" class="md-nav__link">
    <span class="md-ellipsis">
      get_relations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_root_classes" class="md-nav__link">
    <span class="md-ellipsis">
      get_root_classes()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_root_data_properties" class="md-nav__link">
    <span class="md-ellipsis">
      get_root_data_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_root_object_properties" class="md-nav__link">
    <span class="md-ellipsis">
      get_root_object_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_roots" class="md-nav__link">
    <span class="md-ellipsis">
      get_roots()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_unabbreviated_triples" class="md-nav__link">
    <span class="md-ellipsis">
      get_unabbreviated_triples()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_version()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.get_wu_palmer_measure" class="md-nav__link">
    <span class="md-ellipsis">
      get_wu_palmer_measure()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.individuals" class="md-nav__link">
    <span class="md-ellipsis">
      individuals()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.is_defined" class="md-nav__link">
    <span class="md-ellipsis">
      is_defined()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.is_individual" class="md-nav__link">
    <span class="md-ellipsis">
      is_individual()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.load" class="md-nav__link">
    <span class="md-ellipsis">
      load()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.load--arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_annotation_property" class="md-nav__link">
    <span class="md-ellipsis">
      new_annotation_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_class" class="md-nav__link">
    <span class="md-ellipsis">
      new_class()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_data_property" class="md-nav__link">
    <span class="md-ellipsis">
      new_data_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_entity" class="md-nav__link">
    <span class="md-ellipsis">
      new_entity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.new_object_property" class="md-nav__link">
    <span class="md-ellipsis">
      new_object_property()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.number_of_generations" class="md-nav__link">
    <span class="md-ellipsis">
      number_of_generations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.object_properties" class="md-nav__link">
    <span class="md-ellipsis">
      object_properties()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.remove_label_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      remove_label_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.rename_entities" class="md-nav__link">
    <span class="md-ellipsis">
      rename_entities()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.save" class="md-nav__link">
    <span class="md-ellipsis">
      save()
    </span>
  </a>
  
    <nav class="md-nav" aria-label="save()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.save--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.set_common_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      set_common_prefix()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.set_default_label_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      set_default_label_annotations()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.set_version" class="md-nav__link">
    <span class="md-ellipsis">
      set_version()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.sync_attributes" class="md-nav__link">
    <span class="md-ellipsis">
      sync_attributes()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.sync_python_names" class="md-nav__link">
    <span class="md-ellipsis">
      sync_python_names()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.Ontology.sync_reasoner" class="md-nav__link">
    <span class="md-ellipsis">
      sync_reasoner()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.World" class="md-nav__link">
    <span class="md-ellipsis">
      World
    </span>
  </a>
  
    <nav class="md-nav" aria-label="World">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.World.get_ontology" class="md-nav__link">
    <span class="md-ellipsis">
      get_ontology()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ontopy.ontology.World.get_unabbreviated_triples" class="md-nav__link">
    <span class="md-ellipsis">
      get_unabbreviated_triples()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.flatten" class="md-nav__link">
    <span class="md-ellipsis">
      flatten()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ontopy.ontology.get_ontology" class="md-nav__link">
    <span class="md-ellipsis">
      get_ontology()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ontology">ontology<a class="headerlink" href="#ontology" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">

<a id="ontopy.ontology"></a>
    <div class="doc doc-contents first">

      <p>A module adding additional functionality to owlready2.</p>
<p>If desirable some of these additions may be moved back into owlready2.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h2 id="ontopy.ontology.BlankNode" class="doc doc-heading">
        <code>
BlankNode        </code>



<a href="#ontopy.ontology.BlankNode" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Represents a blank node.</p>
<p>A blank node is a node that is not a literal and has no IRI.
Resources represented by blank nodes are also called anonumous resources.
Only the subject or object in an RDF triple can be a blank node.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BlankNode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a blank node.</span>

<span class="sd">    A blank node is a node that is not a literal and has no IRI.</span>
<span class="sd">    Resources represented by blank nodes are also called anonumous resources.</span>
<span class="sd">    Only the subject or object in an RDF triple can be a blank node.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onto</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">World</span><span class="p">,</span> <span class="n">Ontology</span><span class="p">],</span> <span class="n">storid</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initiate a blank node.</span>

<span class="sd">        Args:</span>
<span class="sd">            onto: Ontology or World instance.</span>
<span class="sd">            storid: The storage id of the blank node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">storid</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;A BlankNode is supposed to have a negative storid: </span><span class="si">{</span><span class="n">storid</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onto</span> <span class="o">=</span> <span class="n">onto</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storid</span> <span class="o">=</span> <span class="n">storid</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;_:b</span><span class="si">{</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">onto</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For now blank nodes always compare true against each other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BlankNode</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.BlankNode.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onto</span><span class="p">,</span> <span class="n">storid</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#ontopy.ontology.BlankNode.__init__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Initiate a blank node.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>onto</code></td>
        <td><code>Union[ontopy.ontology.World, ontopy.ontology.Ontology]</code></td>
        <td><p>Ontology or World instance.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>storid</code></td>
        <td><code>int</code></td>
        <td><p>The storage id of the blank node.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onto</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">World</span><span class="p">,</span> <span class="n">Ontology</span><span class="p">],</span> <span class="n">storid</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initiate a blank node.</span>

<span class="sd">    Args:</span>
<span class="sd">        onto: Ontology or World instance.</span>
<span class="sd">        storid: The storage id of the blank node.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">storid</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;A BlankNode is supposed to have a negative storid: </span><span class="si">{</span><span class="n">storid</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">onto</span> <span class="o">=</span> <span class="n">onto</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">storid</span> <span class="o">=</span> <span class="n">storid</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="ontopy.ontology.Ontology" class="doc doc-heading">
        <code>
Ontology            (<span title="owlready2.namespace.Ontology">Ontology</span>)
        </code>



<a href="#ontopy.ontology.Ontology" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>A generic class extending owlready2.Ontology.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Ontology</span><span class="p">(</span><span class="n">owlready2</span><span class="o">.</span><span class="n">Ontology</span><span class="p">):</span>  <span class="c1"># pylint: disable=too-many-public-methods</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A generic class extending owlready2.Ontology.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span> <span class="o">=</span> <span class="n">DEFAULT_LABEL_ANNOTATIONS</span><span class="p">[:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Name of special unlabeled entities, like Thing, Nothing, etc...</span>
    <span class="n">_special_labels</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Some properties for customising dir() listing - useful in</span>
    <span class="c1"># interactive sessions...</span>
    <span class="n">_dir_preflabel</span> <span class="o">=</span> <span class="n">isinteractive</span><span class="p">()</span>
    <span class="n">_dir_label</span> <span class="o">=</span> <span class="n">isinteractive</span><span class="p">()</span>
    <span class="n">_dir_name</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_dir_imported</span> <span class="o">=</span> <span class="n">isinteractive</span><span class="p">()</span>
    <span class="n">dir_preflabel</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">fget</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_preflabel</span><span class="p">,</span>
        <span class="n">fset</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_dir_preflabel&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Whether to include entity prefLabel in dir() listing.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">dir_label</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">fget</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_label</span><span class="p">,</span>
        <span class="n">fset</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_dir_label&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Whether to include entity label in dir() listing.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">dir_name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">fget</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_name</span><span class="p">,</span>
        <span class="n">fset</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_dir_name&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Whether to include entity name in dir() listing.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">dir_imported</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">fget</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_imported</span><span class="p">,</span>
        <span class="n">fset</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_dir_imported&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Whether to include imported ontologies in dir() listing.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Other settings</span>
    <span class="n">_colon_in_label</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">colon_in_label</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span>
        <span class="n">fget</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colon_in_label</span><span class="p">,</span>
        <span class="n">fset</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_colon_in_label&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span>
        <span class="n">doc</span><span class="o">=</span><span class="s2">&quot;Whether to accept colon in name-part of IRI.  &quot;</span>
        <span class="s2">&quot;If true, the name cannot be prefixed.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dirset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__dir__</span><span class="p">())</span>
        <span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dir_imported</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_preflabel</span><span class="p">:</span>
            <span class="n">dirset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="nb">dir</span><span class="o">.</span><span class="n">prefLabel</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>
                <span class="k">for</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="n">lst</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="s2">&quot;prefLabel&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_label</span><span class="p">:</span>
            <span class="n">dirset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="nb">dir</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">first</span><span class="p">())</span> <span class="k">for</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="n">lst</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dir_name</span><span class="p">:</span>
            <span class="n">dirset</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dir</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="nb">dir</span> <span class="ow">in</span> <span class="n">lst</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">))</span>
        <span class="n">dirset</span><span class="o">.</span><span class="n">difference_update</span><span class="p">({</span><span class="kc">None</span><span class="p">})</span>  <span class="c1"># get rid of possible None</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dirset</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattr__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">attr</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">other</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">NoSuchLabelError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">__objclass__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Play nice with inspect...</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a hash based on base_iri.</span>
<span class="sd">        This is done to keep Ontology hashable when defining __eq__.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if this ontology is equal to `other`.</span>

<span class="sd">        This function compares the result of</span>
<span class="sd">        ``set(self.get_unabbreviated_triples(label=&#39;_:b&#39;))``,</span>
<span class="sd">        i.e. blank nodes are not distinguished, but relations to blank</span>
<span class="sd">        nodes are included.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_unabbreviated_triples</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="s2">&quot;_:b&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span>
            <span class="n">other</span><span class="o">.</span><span class="n">get_unabbreviated_triples</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="s2">&quot;_:b&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_unabbreviated_triples</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all matching triples unabbreviated.</span>

<span class="sd">        If `blank` is given, it will be used to represent blank nodes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=invalid-name</span>
        <span class="k">return</span> <span class="n">_get_unabbreviated_triples</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_default_label_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the default label annotations.&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Ontology.set_default_label_annotations() is deprecated. &quot;</span>
            <span class="s2">&quot;Default label annotations are set by Ontology.__init__(). &quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span> <span class="o">=</span> <span class="n">DEFAULT_LABEL_ANNOTATIONS</span><span class="p">[:]</span>

    <span class="k">def</span> <span class="nf">get_by_label</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">label_annotations</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">imported</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">colon_in_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns entity with label annotation `label`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">           label: label so search for.</span>
<span class="sd">               May be written as &#39;label&#39; or &#39;prefix:label&#39;.</span>
<span class="sd">               get_by_label(&#39;prefix:label&#39;) ==</span>
<span class="sd">               get_by_label(&#39;label&#39;, prefix=&#39;prefix&#39;).</span>
<span class="sd">           label_annotations: a sequence of label annotation names to look up.</span>
<span class="sd">               Defaults to the `label_annotations` property.</span>
<span class="sd">           prefix: if provided, it should be the last component of</span>
<span class="sd">               the base iri of an ontology (with trailing slash (/) or hash</span>
<span class="sd">               (#) stripped off).  The search for a matching label will be</span>
<span class="sd">               limited to this namespace.</span>
<span class="sd">           imported: Whether to also look for `label` in imported ontologies.</span>
<span class="sd">           colon_in_label: Whether to accept colon (:) in a label or name-part</span>
<span class="sd">               of IRI.  Defaults to the `colon_in_label` property of `self`.</span>
<span class="sd">               Setting this true cannot be combined with `prefix`.</span>

<span class="sd">        If several entities have the same label, only the one which is</span>
<span class="sd">        found first is returned.Use get_by_label_all() to get all matches.</span>

<span class="sd">        Note, if different prefixes are provided in the label and via</span>
<span class="sd">        the `prefix` argument a warning will be issued and the</span>
<span class="sd">        `prefix` argument will take precedence.</span>

<span class="sd">        A NoSuchLabelError is raised if `label` cannot be found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-arguments,too-many-branches,invalid-name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid label definition, must be a string: &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">label_annotations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">label_annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span>

        <span class="k">if</span> <span class="n">colon_in_label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colon_in_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colon_in_label</span>
        <span class="k">if</span> <span class="n">colon_in_label</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;`prefix` cannot be combined with `colon_in_label`&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">splitlabel</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitlabel</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;//&quot;</span><span class="p">):</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">prefix</span> <span class="o">!=</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Prefix given both as argument (</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">) &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;and in label (</span><span class="si">{</span><span class="n">splitlabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">). &quot;</span>
                        <span class="s2">&quot;Prefix given in argument takes precedence. &quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix</span><span class="p">:</span>
                    <span class="n">prefix</span> <span class="o">=</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="n">entityset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label_all</span><span class="p">(</span>
                <span class="n">label</span><span class="p">,</span>
                <span class="n">label_annotations</span><span class="o">=</span><span class="n">label_annotations</span><span class="p">,</span>
                <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">entityset</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">entityset</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">entityset</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">AmbiguousLabelError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Several entities have the same label &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;with prefix &#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                <span class="p">)</span>
            <span class="k">raise</span> <span class="n">NoSuchLabelError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No label annotations matches for &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;with prefix &#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Label is a full IRI</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">entity</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">entity</span>

        <span class="n">get_triples</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_data_triples_spod_spod</span>
            <span class="k">if</span> <span class="n">imported</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_triples_spod_spod</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">storid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_storids</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">get_triples</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">storid</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>

        <span class="c1"># Special labels</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="ow">and</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>

        <span class="c1"># Check if label is a name under base_iri</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="o">+</span> <span class="n">label</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">entity</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">entity</span>

        <span class="c1"># Check label is the name of an entity</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">entity</span>

        <span class="k">raise</span> <span class="n">NoSuchLabelError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No label annotations matches &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_by_label_all</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">label</span><span class="p">,</span>
        <span class="n">label_annotations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Set[Optional[owlready2.entity.EntityClass]]&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns set of entities with label annotation `label`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">           label: label so search for.</span>
<span class="sd">               May be written as &#39;label&#39; or &#39;prefix:label&#39;.  Wildcard matching</span>
<span class="sd">               using glob pattern is also supported if `exact_match` is set to</span>
<span class="sd">               false.</span>
<span class="sd">           label_annotations: a sequence of label annotation names to look up.</span>
<span class="sd">               Defaults to the `label_annotations` property.</span>
<span class="sd">           prefix: if provided, it should be the last component of</span>
<span class="sd">               the base iri of an ontology (with trailing slash (/) or hash</span>
<span class="sd">               (#) stripped off).  The search for a matching label will be</span>
<span class="sd">               limited to this namespace.</span>
<span class="sd">           exact_match: Do not treat &quot;*&quot; and brackets as special characters</span>
<span class="sd">               when matching.  May be useful if your ontology has labels</span>
<span class="sd">               containing such labels.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Set of all matching entities or an empty set if no matches</span>
<span class="sd">            could be found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid label definition, &quot;</span> <span class="sa">f</span><span class="s2">&quot;must be a string: </span><span class="si">{</span><span class="n">label</span><span class="si">!r}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">label</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid label definition, </span><span class="si">{</span><span class="n">label</span><span class="si">!r}</span><span class="s2"> contains spaces.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">label_annotations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">label_annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span>

        <span class="n">entities</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># Check label annotations</span>
        <span class="k">if</span> <span class="n">exact_match</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">storid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_storids</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">):</span>
                <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_by_storid</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_data_triples_spod_spod</span><span class="p">(</span>
                        <span class="kc">None</span><span class="p">,</span> <span class="n">storid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">),</span> <span class="kc">None</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">storid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_storids</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">):</span>
                <span class="n">label_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">storid</span><span class="p">)</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">label_entity</span><span class="o">.</span><span class="n">name</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">label_entity</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">)</span>
                    <span class="k">else</span> <span class="n">label_entity</span>
                <span class="p">)</span>
                <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">label</span><span class="p">}))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="ow">and</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">:</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">[</span><span class="n">label</span><span class="p">])</span>

        <span class="c1"># Check name-part of IRI</span>
        <span class="k">if</span> <span class="n">exact_match</span><span class="p">:</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="n">ent</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()</span> <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()),</span> <span class="n">label</span>
            <span class="p">)</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="n">ent</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()</span> <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">matches</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span>
                <span class="n">ent</span>
                <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">entities</span>
                <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">prefix</span> <span class="o">==</span> <span class="n">prefix</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">entities</span>

    <span class="k">def</span> <span class="nf">_to_storids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">create_if_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of storid&#39;s corresponding to the elements in the</span>
<span class="sd">        sequence `sequence`.</span>

<span class="sd">        The elements may be either be full IRIs (strings) or Owlready2</span>
<span class="sd">        entities with an associated storid.</span>

<span class="sd">        If `create_if_missing` is true, new Owlready2 entities will be</span>
<span class="sd">        created for IRIs that not already are associated with an</span>
<span class="sd">        entity.  Otherwise such IRIs will be skipped in the returned</span>
<span class="sd">        list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sequence</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">storids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;storid&quot;</span><span class="p">):</span>
                <span class="n">storids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">storid</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">create_if_missing</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">storid</span><span class="p">:</span>
                    <span class="n">storids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">storid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">storids</span>

    <span class="k">def</span> <span class="nf">add_label_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds label annotation used by get_by_label().&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Ontology.add_label_annotations() is deprecated. &quot;</span>
            <span class="s2">&quot;Direct modify the `label_annotations` attribute instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="s2">&quot;iri&quot;</span><span class="p">):</span>
            <span class="n">iri</span> <span class="o">=</span> <span class="n">iri</span><span class="o">.</span><span class="n">iri</span>
        <span class="k">if</span> <span class="n">iri</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iri</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_label_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes label annotation used by get_by_label().&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Ontology.remove_label_annotations() is deprecated. &quot;</span>
            <span class="s2">&quot;Direct modify the `label_annotations` attribute instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="s2">&quot;iri&quot;</span><span class="p">):</span>
            <span class="n">iri</span> <span class="o">=</span> <span class="n">iri</span><span class="o">.</span><span class="n">iri</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">iri</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">set_common_prefix</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">iri_base</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;http://emmo.info/emmo&quot;</span><span class="p">,</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;emmo&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a common prefix for all imported ontologies</span>
<span class="sd">        with the same first part of the base_iri.</span>

<span class="sd">        Args:</span>
<span class="sd">            iri_base: The start of the base_iri to look for. Defaults to</span>
<span class="sd">                the emmo base_iri http://emmo.info/emmo</span>
<span class="sd">            prefix: the desired prefix. Defaults to emmo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">iri_base</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
            <span class="n">onto</span><span class="o">.</span><span class="n">set_common_prefix</span><span class="p">(</span><span class="n">iri_base</span><span class="o">=</span><span class="n">iri_base</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments,arguments-renamed</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">only_local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="n">reload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reload_if_newer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">url_from_catalog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">catalog_file</span><span class="o">=</span><span class="s2">&quot;catalog-v001.xml&quot;</span><span class="p">,</span>
        <span class="n">emmo_based</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">prefix_emmo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load the ontology.</span>

<span class="sd">        Arguments</span>
<span class="sd">        ---------</span>
<span class="sd">        only_local: bool</span>
<span class="sd">            Whether to only read local files.  This requires that you</span>
<span class="sd">            have appended the path to the ontology to owlready2.onto_path.</span>
<span class="sd">        filename: str</span>
<span class="sd">            Path to file to load the ontology from.  Defaults to `base_iri`</span>
<span class="sd">            provided to get_ontology().</span>
<span class="sd">        format: str</span>
<span class="sd">            Format of `filename`.  Default is inferred from `filename`</span>
<span class="sd">            extension.</span>
<span class="sd">        reload: bool</span>
<span class="sd">            Whether to reload the ontology if it is already loaded.</span>
<span class="sd">        reload_if_newer: bool</span>
<span class="sd">            Whether to reload the ontology if the source has changed since</span>
<span class="sd">            last time it was loaded.</span>
<span class="sd">        url_from_catalog: bool | None</span>
<span class="sd">            Whether to use catalog file to resolve the location of `base_iri`.</span>
<span class="sd">            If None, the catalog file is used if it exists in the same</span>
<span class="sd">            directory as `filename`.</span>
<span class="sd">        catalog_file: str</span>
<span class="sd">            Name of Protg catalog file in the same folder as the</span>
<span class="sd">            ontology.  This option is used together with `only_local` and</span>
<span class="sd">            defaults to &quot;catalog-v001.xml&quot;.</span>
<span class="sd">        emmo_based: bool</span>
<span class="sd">            Whether this is an EMMO-based ontology or not, default `True`.</span>
<span class="sd">        prefix: defaults to self.get_namespace.name if</span>
<span class="sd">        prefix_emmo: bool, default None. If emmo_based is True it</span>
<span class="sd">            defaults to True and sets the prefix of all imported ontologies</span>
<span class="sd">            with base_iri starting with &#39;http://emmo.info/emmo&#39; to emmo</span>
<span class="sd">        kwargs:</span>
<span class="sd">            Additional keyword arguments are passed on to</span>
<span class="sd">            owlready2.Ontology.load().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: make sure that `only_local` argument is respected...</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaded</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load</span><span class="p">(</span>
            <span class="n">only_local</span><span class="o">=</span><span class="n">only_local</span><span class="p">,</span>
            <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">reload</span><span class="o">=</span><span class="n">reload</span><span class="p">,</span>
            <span class="n">reload_if_newer</span><span class="o">=</span><span class="n">reload_if_newer</span><span class="p">,</span>
            <span class="n">url_from_catalog</span><span class="o">=</span><span class="n">url_from_catalog</span><span class="p">,</span>
            <span class="n">catalog_file</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Enable optimised search by get_by_label()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">emmo_based</span><span class="p">:</span>
            <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="s2">&quot;http://www.w3.org/2002/07/owl#topObjectProperty&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Thing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">,</span>
                <span class="s2">&quot;Nothing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Nothing</span><span class="p">,</span>
                <span class="s2">&quot;topObjectProperty&quot;</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span>
                <span class="s2">&quot;owl:Thing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">,</span>
                <span class="s2">&quot;owl:Nothing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Nothing</span><span class="p">,</span>
                <span class="s2">&quot;owl:topObjectProperty&quot;</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="c1"># set prefix if another prefix is desired</span>
        <span class="c1"># if we do this, shouldn&#39;t we make the name of all</span>
        <span class="c1"># entities of the given ontology to the same?</span>
        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

        <span class="k">if</span> <span class="n">emmo_based</span> <span class="ow">and</span> <span class="n">prefix_emmo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prefix_emmo</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">prefix_emmo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_common_prefix</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">_load</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments,too-many-locals,too-many-branches,too-many-statements</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">only_local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
        <span class="n">reload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reload_if_newer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">url_from_catalog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">catalog_file</span><span class="o">=</span><span class="s2">&quot;catalog-v001.xml&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Help function for load().&quot;&quot;&quot;</span>
        <span class="n">web_protocol</span> <span class="o">=</span> <span class="s2">&quot;http://&quot;</span><span class="p">,</span> <span class="s2">&quot;https://&quot;</span><span class="p">,</span> <span class="s2">&quot;ftp://&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">if</span> <span class="n">filename</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/#&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">web_protocol</span><span class="p">):</span>
            <span class="n">baseurl</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">catalogurl</span> <span class="o">=</span> <span class="n">baseurl</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">catalog_file</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;file://&quot;</span><span class="p">):</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
            <span class="n">baseurl</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">catalogurl</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span> <span class="n">catalog_file</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">getmtime</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Resolve url from catalog file</span>
        <span class="n">iris</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">dirs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">url_from_catalog</span> <span class="ow">or</span> <span class="n">url_from_catalog</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">not_reload</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">reload</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="n">reload_if_newer</span>
                <span class="ow">or</span> <span class="n">getmtime</span><span class="p">(</span><span class="n">catalogurl</span><span class="p">)</span>
                <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_cached_catalogs</span><span class="p">[</span><span class="n">catalogurl</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="c1"># get iris from catalog already in cached catalogs</span>
            <span class="k">if</span> <span class="n">catalogurl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_cached_catalogs</span> <span class="ow">and</span> <span class="n">not_reload</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">iris</span><span class="p">,</span> <span class="n">dirs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_cached_catalogs</span><span class="p">[</span><span class="n">catalogurl</span><span class="p">]</span>
            <span class="c1"># do not update cached_catalogs if url already in _iri_mappings</span>
            <span class="c1"># and reload not forced</span>
            <span class="k">elif</span> <span class="n">url</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_iri_mappings</span> <span class="ow">and</span> <span class="n">not_reload</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="c1"># update iris from current catalogurl</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">iris</span><span class="p">,</span> <span class="n">dirs</span> <span class="o">=</span> <span class="n">read_catalog</span><span class="p">(</span>
                        <span class="n">uri</span><span class="o">=</span><span class="n">catalogurl</span><span class="p">,</span>
                        <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">return_paths</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">catalog_file</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">ReadCatalogError</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">url_from_catalog</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_cached_catalogs</span><span class="p">[</span><span class="n">catalogurl</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="p">{},</span> <span class="nb">set</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_cached_catalogs</span><span class="p">[</span><span class="n">catalogurl</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">getmtime</span><span class="p">(</span><span class="n">catalogurl</span><span class="p">),</span>
                        <span class="n">iris</span><span class="p">,</span>
                        <span class="n">dirs</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_iri_mappings</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>
        <span class="n">resolved_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_iri_mappings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
        <span class="c1"># Append paths from catalog file to onto_path</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">dirs</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">onto_path</span><span class="p">:</span>
                <span class="n">owlready2</span><span class="o">.</span><span class="n">onto_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># Use catalog file to update IRIs of imported ontologies</span>
        <span class="c1"># in internal store and try to load again...</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_iri_mappings</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">abbrev_iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_obj_triples_sp_o</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">owl_imports</span>
            <span class="p">):</span>
                <span class="n">iri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">abbrev_iri</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_iri_mappings</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_del_obj_triple_spo</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">owl_imports</span><span class="p">,</span> <span class="n">abbrev_iri</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_add_obj_triple_spo</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span>
                        <span class="n">owlready2</span><span class="o">.</span><span class="n">owl_imports</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_iri_mappings</span><span class="p">[</span><span class="n">iri</span><span class="p">]),</span>
                    <span class="p">)</span>

        <span class="c1"># Load ontology</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="nb">format</span> <span class="k">if</span> <span class="nb">format</span> <span class="k">else</span> <span class="n">guess_format</span><span class="p">(</span><span class="n">resolved_url</span><span class="p">,</span> <span class="n">fmap</span><span class="o">=</span><span class="n">FMAP</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fmt</span> <span class="ow">and</span> <span class="n">fmt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">OWLREADY2_FORMATS</span><span class="p">:</span>
                <span class="c1"># Convert filename to rdfxml before passing it to owlready2</span>
                <span class="n">graph</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">graph</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">resolved_url</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">URLError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">EMMOntoPyException</span><span class="p">(</span>
                        <span class="s2">&quot;URL error&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">resolved_url</span>
                    <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

                <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">()</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
                    <span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">handle</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
                    <span class="n">handle</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
                        <span class="n">only_local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">fileobj</span><span class="o">=</span><span class="n">handle</span><span class="p">,</span>
                        <span class="n">reload</span><span class="o">=</span><span class="n">reload</span><span class="p">,</span>
                        <span class="n">reload_if_newer</span><span class="o">=</span><span class="n">reload_if_newer</span><span class="p">,</span>
                        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;rdfxml&quot;</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="n">resolved_url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">web_protocol</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
                    <span class="n">only_local</span><span class="o">=</span><span class="n">only_local</span><span class="p">,</span>
                    <span class="n">reload</span><span class="o">=</span><span class="n">reload</span><span class="p">,</span>
                    <span class="n">reload_if_newer</span><span class="o">=</span><span class="n">reload_if_newer</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">resolved_url</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
                        <span class="n">only_local</span><span class="o">=</span><span class="n">only_local</span><span class="p">,</span>
                        <span class="n">fileobj</span><span class="o">=</span><span class="n">handle</span><span class="p">,</span>
                        <span class="n">reload</span><span class="o">=</span><span class="n">reload</span><span class="p">,</span>
                        <span class="n">reload_if_newer</span><span class="o">=</span><span class="n">reload_if_newer</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">OwlReadyOntologyParsingError</span><span class="p">:</span>
            <span class="c1"># Owlready2 is not able to parse the ontology - most</span>
            <span class="c1"># likely because imported ontologies must be resolved</span>
            <span class="c1"># using the catalog file.</span>

            <span class="c1"># Reraise if we don&#39;t want to read from the catalog file</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">url_from_catalog</span> <span class="ow">and</span> <span class="n">url_from_catalog</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;Recovering from Owlready2 parsing error... might be deprecated&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Copy the ontology into a local folder and try again</span>
            <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">resolved_url</span><span class="p">))</span>
                <span class="n">convert_imported</span><span class="p">(</span>
                    <span class="n">input_ontology</span><span class="o">=</span><span class="n">resolved_url</span><span class="p">,</span>
                    <span class="n">output_ontology</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
                    <span class="n">input_format</span><span class="o">=</span><span class="n">fmt</span><span class="p">,</span>
                    <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">,</span>
                    <span class="n">url_from_catalog</span><span class="o">=</span><span class="n">url_from_catalog</span><span class="p">,</span>
                    <span class="n">catalog_file</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span>
                            <span class="n">only_local</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">fileobj</span><span class="o">=</span><span class="n">handle</span><span class="p">,</span>
                            <span class="n">reload</span><span class="o">=</span><span class="n">reload</span><span class="p">,</span>
                            <span class="n">reload_if_newer</span><span class="o">=</span><span class="n">reload_if_newer</span><span class="p">,</span>
                            <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;rdfxml&quot;</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">except</span> <span class="n">HTTPError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>  <span class="c1"># Add url to HTTPError message</span>
                        <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span>
                            <span class="n">url</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                            <span class="n">code</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                            <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="o">.</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">hdrs</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">hdrs</span><span class="p">,</span>
                            <span class="n">fp</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">fp</span><span class="p">,</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">with_traceback</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">HTTPError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>  <span class="c1"># Add url to HTTPError message</span>
            <span class="k">raise</span> <span class="n">HTTPError</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="n">code</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exc</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="o">.</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">hdrs</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">hdrs</span><span class="p">,</span>
                <span class="n">fp</span><span class="o">=</span><span class="n">exc</span><span class="o">.</span><span class="n">fp</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">with_traceback</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">__traceback__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span>
        <span class="n">mkdir</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">squash</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">write_catalog_file</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">append_catalog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">catalog_file</span><span class="o">=</span><span class="s2">&quot;catalog-v001.xml&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Writes the ontology to file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename: None | str | Path</span>
<span class="sd">            Name of file to write to.  If None, it defaults to the name</span>
<span class="sd">            of the ontology with `format` as file extension.</span>
<span class="sd">        format: str</span>
<span class="sd">            Output format. The default is to infer it from `filename`.</span>
<span class="sd">        dir: str | Path</span>
<span class="sd">            If `filename` is a relative path, it is a relative path to `dir`.</span>
<span class="sd">        mkdir: bool</span>
<span class="sd">            Whether to create output directory if it does not exists.</span>
<span class="sd">        owerwrite: bool</span>
<span class="sd">            If true and `filename` exists, remove the existing file before</span>
<span class="sd">            saving.  The default is to append to an existing ontology.</span>
<span class="sd">        recursive: bool</span>
<span class="sd">            Whether to save imported ontologies recursively.  This is</span>
<span class="sd">            commonly combined with `filename=None`, `dir` and `mkdir`.</span>
<span class="sd">        squash: bool</span>
<span class="sd">            If true, rdflib will be used to save the current ontology</span>
<span class="sd">            together with all its sub-ontologies into `filename`.</span>
<span class="sd">            It make no sense to combine this with `recursive`.</span>
<span class="sd">        write_catalog_file: bool</span>
<span class="sd">            Whether to also write a catalog file to disk.</span>
<span class="sd">        append_catalog: bool</span>
<span class="sd">            Whether to append to an existing catalog file.</span>
<span class="sd">        catalog_file: str | Path</span>
<span class="sd">            Name of catalog file.  If not an absolute path, it is prepended</span>
<span class="sd">            to `dir`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=redefined-builtin,too-many-arguments</span>
        <span class="c1"># pylint: disable=too-many-statements,too-many-branches</span>
        <span class="c1"># pylint: disable=too-many-locals,arguments-renamed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_validate_installed_version</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">,</span> <span class="n">min_version</span><span class="o">=</span><span class="s2">&quot;6.0.0&quot;</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FMAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ttl&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="p">(</span>  <span class="c1"># pylint: disable=import-outside-toplevel</span>
                <span class="n">__version__</span> <span class="k">as</span> <span class="n">__rdflib_version__</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="n">IncompatibleVersion</span><span class="p">(</span>
                    <span class="s2">&quot;To correctly convert to Turtle format, rdflib must be &quot;</span>
                    <span class="s2">&quot;version 6.0.0 or greater, however, the detected rdflib &quot;</span>
                    <span class="s2">&quot;version used by your Python interpreter is &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">__rdflib_version__</span><span class="si">!r}</span><span class="s2">. For more information see the &quot;</span>
                    <span class="s2">&quot;&#39;Known issues&#39; section of the README.&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="n">revmap</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">FMAP</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">format</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">revmap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;`filename` and `format` cannot both be None.&quot;</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>

        <span class="k">if</span> <span class="n">mkdir</span><span class="p">:</span>
            <span class="n">outdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">outdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">outdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">format</span><span class="p">:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="n">guess_format</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">fmap</span><span class="o">=</span><span class="n">FMAP</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">revmap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">filename</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

        <span class="n">EMMO</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span>  <span class="c1"># pylint:disable=invalid-name</span>
            <span class="s2">&quot;http://emmo.info/emmo#&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">squash</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;`recursive` and `squash` should not both be true&quot;</span>
                <span class="p">)</span>
            <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
                <span class="n">obase</span> <span class="o">=</span> <span class="n">onto</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>
                <span class="n">newdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">obase</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
                <span class="n">onto</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
                    <span class="nb">dir</span><span class="o">=</span><span class="n">newdir</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
                    <span class="n">mkdir</span><span class="o">=</span><span class="n">mkdir</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                    <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                    <span class="n">squash</span><span class="o">=</span><span class="n">squash</span><span class="p">,</span>
                    <span class="n">write_catalog_file</span><span class="o">=</span><span class="n">write_catalog_file</span><span class="p">,</span>
                    <span class="n">append_catalog</span><span class="o">=</span><span class="n">append_catalog</span><span class="p">,</span>
                    <span class="n">catalog_file</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">squash</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="p">(</span>  <span class="c1"># pylint:disable=import-outside-toplevel</span>
                <span class="n">URIRef</span><span class="p">,</span>
                <span class="n">RDF</span><span class="p">,</span>
                <span class="n">OWL</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">as_rdflib_graph</span><span class="p">()</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;emmo&quot;</span><span class="p">,</span> <span class="n">EMMO</span><span class="p">)</span>

            <span class="c1"># Remove anonymous namespace and imports</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">URIRef</span><span class="p">(</span><span class="s2">&quot;http://anonymous&quot;</span><span class="p">),</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">Ontology</span><span class="p">))</span>
            <span class="n">imports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">imports</span><span class="p">,</span> <span class="kc">None</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">triple</span> <span class="ow">in</span> <span class="n">imports</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>

            <span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="ow">in</span> <span class="n">OWLREADY2_FORMATS</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The try-finally clause is needed for cleanup and because</span>
            <span class="c1"># we have to provide delete=False to NamedTemporaryFile</span>
            <span class="c1"># since Windows does not allow to reopen an already open</span>
            <span class="c1"># file.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span>
                    <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;.owl&quot;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
                    <span class="n">tmpfile</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">name</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;rdfxml&quot;</span><span class="p">)</span>
                <span class="n">graph</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">write_catalog_file</span><span class="p">:</span>
            <span class="n">mappings</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="n">onto</span><span class="p">):</span>
                <span class="n">obase</span> <span class="o">=</span> <span class="n">onto</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>
                <span class="n">newdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">obase</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
                <span class="n">newpath</span> <span class="o">=</span> <span class="n">newdir</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">onto</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">relpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">newpath</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
                <span class="n">mappings</span><span class="p">[</span><span class="n">onto</span><span class="o">.</span><span class="n">get_version</span><span class="p">(</span><span class="n">as_iri</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">relpath</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">imported</span> <span class="ow">in</span> <span class="n">onto</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
                    <span class="n">append</span><span class="p">(</span><span class="n">imported</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
                <span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">write_catalog</span><span class="p">(</span>
                <span class="n">mappings</span><span class="p">,</span>
                <span class="n">output</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
                <span class="n">directory</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span>
                <span class="n">append</span><span class="o">=</span><span class="n">append_catalog</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_imported_ontologies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list with imported ontologies.</span>

<span class="sd">        If `recursive` is `True`, ontologies imported by imported ontologies</span>
<span class="sd">        are also returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">rec_imported</span><span class="p">(</span><span class="n">onto</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">ontology</span> <span class="ow">in</span> <span class="n">onto</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ontology</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">imported</span><span class="p">:</span>
                    <span class="n">imported</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>
                    <span class="n">rec_imported</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="n">imported</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">rec_imported</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">imported</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span>

    <span class="k">def</span> <span class="nf">get_entities</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">imported</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">classes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">individuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">object_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">data_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">annotation_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a generator over (optionally) all classes, individuals,</span>
<span class="sd">        object_properties, data_properties and annotation_properties.</span>

<span class="sd">        If `imported` is `True`, entities in imported ontologies will also</span>
<span class="sd">        be included.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">generator</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">classes</span><span class="p">:</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">individuals</span><span class="p">:</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">individuals</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">object_properties</span><span class="p">:</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">data_properties</span><span class="p">:</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">annotation_properties</span><span class="p">:</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">generator</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">entity</span>

    <span class="k">def</span> <span class="nf">classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an generator over all classes.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            imported: if `True`, entities in imported ontologies</span>
<span class="sd">                are also returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;classes&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>  <span class="c1"># pylint: disable=too-many-branches</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an generator over all entities of the desired type.</span>
<span class="sd">        This is a helper function for `classes()`, `individuals()`,</span>
<span class="sd">        `object_properties()`, `data_properties()` and</span>
<span class="sd">        `annotation_properties()`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            entity_type: The type of entity desired given as a string.</span>
<span class="sd">                Can be any of `classes`, `individuals`,</span>
<span class="sd">                `object_properties`, `data_properties` and</span>
<span class="sd">                `annotation_properties`.</span>
<span class="sd">            imported: if `True`, entities in imported ontologies</span>
<span class="sd">                are also returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">generator</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">imported</span><span class="p">:</span>
            <span class="n">ontologies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_imported_ontologies</span><span class="p">(</span><span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ontologies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="n">ontologies</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">onto</span><span class="o">.</span><span class="n">classes</span><span class="p">()):</span>
                        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;individuals&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">onto</span><span class="o">.</span><span class="n">individuals</span><span class="p">()):</span>
                        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;object_properties&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">onto</span><span class="o">.</span><span class="n">object_properties</span><span class="p">()):</span>
                        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;data_properties&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">onto</span><span class="o">.</span><span class="n">data_properties</span><span class="p">()):</span>
                        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;annotation_properties&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">onto</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">()):</span>
                        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;classes&quot;</span><span class="p">:</span>
                <span class="n">generator</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">classes</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;individuals&quot;</span><span class="p">:</span>
                <span class="n">generator</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">individuals</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;object_properties&quot;</span><span class="p">:</span>
                <span class="n">generator</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">object_properties</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;data_properties&quot;</span><span class="p">:</span>
                <span class="n">generator</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">data_properties</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="s2">&quot;annotation_properties&quot;</span><span class="p">:</span>
                <span class="n">generator</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">generator</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">entity</span>

    <span class="k">def</span> <span class="nf">individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an generator over all individuals.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            imported: if `True`, entities in imported ontologies</span>
<span class="sd">                are also returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;individuals&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an generator over all object_properties.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            imported: if `True`, entities in imported ontologies</span>
<span class="sd">                are also returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;object_properties&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an generator over all data_properties.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            imported: if `True`, entities in imported ontologies</span>
<span class="sd">                are also returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;data_properties&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">annotation_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an generator over all annotation_properties.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            imported: if `True`, entities in imported ontologies</span>
<span class="sd">                are also returned.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;annotation_properties&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_root_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list or root classes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">cls</span>
            <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="bp">cls</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">]))</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_root_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of root object properties.&quot;&quot;&quot;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">props</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_a</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">get_root_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of root object properties.&quot;&quot;&quot;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">props</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_a</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">get_roots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all class, object_property and data_property roots.&quot;&quot;&quot;</span>
        <span class="n">roots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_classes</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
        <span class="n">roots</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_root_object_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
        <span class="n">roots</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_root_data_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">roots</span>

    <span class="k">def</span> <span class="nf">sync_python_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;prefLabel&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;altLabel&quot;</span><span class="p">)):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the `python_name` attribute of all properties.</span>

<span class="sd">        The python_name attribute will be set to the first non-empty</span>
<span class="sd">        annotation in the sequence of annotations in `annotations` for</span>
<span class="sd">        the property.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">gen</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">annotation</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">annotation</span><span class="p">):</span>
                        <span class="n">prop</span><span class="o">.</span><span class="n">python_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">annotation</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
                        <span class="k">break</span>

        <span class="n">update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span>
                <span class="n">classes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">individuals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">object_properties</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">data_properties</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">update</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span>
                <span class="n">classes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">individuals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">annotation_properties</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">rename_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">annotations</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;prefLabel&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;altLabel&quot;</span><span class="p">),</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set `name` of all entities to the first non-empty annotation in</span>
<span class="sd">        `annotations`.</span>

<span class="sd">        Warning, this method changes all IRIs in the ontology.  However,</span>
<span class="sd">        it may be useful to make the ontology more readable and to work</span>
<span class="sd">        with it together with a triple store.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">annotation</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">annotation</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
                        <span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                        <span class="k">break</span>

    <span class="k">def</span> <span class="nf">sync_reasoner</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">reasoner</span><span class="o">=</span><span class="s2">&quot;HermiT&quot;</span><span class="p">,</span> <span class="n">include_imported</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update current ontology by running the given reasoner.</span>

<span class="sd">        Supported values for `reasoner` are &#39;HermiT&#39; (default), Pellet</span>
<span class="sd">        and &#39;FaCT++&#39;.</span>

<span class="sd">        If `include_imported` is true, the reasoner will also reason</span>
<span class="sd">        over imported ontologies.  Note that this may be **very** slow.</span>

<span class="sd">        Keyword arguments are passed to the underlying owlready2 function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;FaCT++&quot;</span><span class="p">:</span>
            <span class="n">sync</span> <span class="o">=</span> <span class="n">sync_reasoner_factpp</span>
        <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;Pellet&quot;</span><span class="p">:</span>
            <span class="n">sync</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">sync_reasoner_pellet</span>
        <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;HermiT&quot;</span><span class="p">:</span>
            <span class="n">sync</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">sync_reasoner_hermit</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unknown reasoner &#39;</span><span class="si">{</span><span class="n">reasoner</span><span class="si">}</span><span class="s2">&#39;. Supported reasoners &quot;</span>
                <span class="s2">&quot;are &#39;Pellet&#39;, &#39;HermiT&#39; and &#39;FaCT++&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># For some reason we must visit all entities once before running</span>
        <span class="c1"># the reasoner...</span>
        <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">())</span>

        <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">include_imported</span><span class="p">:</span>
                <span class="n">sync</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">sync_attributes</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-branches</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name_policy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">name_prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">class_docstring</span><span class="o">=</span><span class="s2">&quot;comment&quot;</span><span class="p">,</span>
        <span class="n">sync_imported</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method is intended to be called after you have added new</span>
<span class="sd">        classes (typically via Python) to make sure that attributes like</span>
<span class="sd">        `label` and `comments` are defined.</span>

<span class="sd">        If a class, object property, data property or annotation</span>
<span class="sd">        property in the current ontology has no label, the name of</span>
<span class="sd">        the corresponding Python class will be assigned as label.</span>

<span class="sd">        If a class, object property, data property or annotation</span>
<span class="sd">        property has no comment, it will be assigned the docstring of</span>
<span class="sd">        the corresponding Python class.</span>

<span class="sd">        `name_policy` specify wether and how the names in the ontology</span>
<span class="sd">        should be updated.  Valid values are:</span>
<span class="sd">          None          not changed</span>
<span class="sd">          &quot;uuid&quot;        `name_prefix` followed by a global unique id (UUID).</span>
<span class="sd">                        If the name is already valid accoridng to this standard</span>
<span class="sd">                        it will not be regenerated.</span>
<span class="sd">          &quot;sequential&quot;  `name_prefix` followed a sequantial number.</span>
<span class="sd">        EMMO conventions imply ``name_policy==&#39;uuid&#39;``.</span>

<span class="sd">        If `sync_imported` is true, all imported ontologies are also</span>
<span class="sd">        updated.</span>

<span class="sd">        The `class_docstring` argument specifies the annotation that</span>
<span class="sd">        class docstrings are mapped to.  Defaults to &quot;comment&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">(),</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;prefLabel&quot;</span><span class="p">):</span>
                <span class="c1"># no prefLabel - create new annotation property..</span>
                <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="c1"># pylint: disable=invalid-name,missing-class-docstring</span>
                    <span class="c1"># pylint: disable=unused-variable</span>
                    <span class="k">class</span> <span class="nc">prefLabel</span><span class="p">(</span><span class="n">owlready2</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
                        <span class="k">pass</span>

                <span class="bp">cls</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">locstr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefLabel</span><span class="p">:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">prefLabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locstr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">class_docstring</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;__doc__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">class_docstring</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">locstr</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">individuals</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="s2">&quot;prefLabel&quot;</span><span class="p">):</span>
                <span class="c1"># no prefLabel - create new annotation property..</span>
                <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="c1"># pylint: disable=invalid-name,missing-class-docstring</span>
                    <span class="c1"># pylint: disable=function-redefined</span>
                    <span class="k">class</span> <span class="nc">prefLabel</span><span class="p">(</span><span class="n">owlready2</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
                        <span class="n">iri</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2004/02/skos/core#prefLabel&quot;</span>

                <span class="n">ind</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">locstr</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">ind</span><span class="o">.</span><span class="n">prefLabel</span><span class="p">:</span>
                <span class="n">ind</span><span class="o">.</span><span class="n">prefLabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locstr</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">))</span>

        <span class="n">chain</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">individuals</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">name_policy</span> <span class="o">==</span> <span class="s2">&quot;uuid&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Passing the following means that the name is valid</span>
                    <span class="c1"># and need not be regenerated.</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">name_prefix</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span>
                    <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="n">name_prefix</span><span class="p">),</span> <span class="n">version</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name_prefix</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                        <span class="n">uuid</span><span class="o">.</span><span class="n">uuid5</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">NAMESPACE_DNS</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">elif</span> <span class="n">name_policy</span> <span class="o">==</span> <span class="s2">&quot;sequential&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
                <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">while</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="si">}{</span><span class="n">name_prefix</span><span class="si">}{</span><span class="n">counter</span><span class="si">}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name_prefix</span><span class="si">}{</span><span class="n">counter</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">name_policy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid name_policy: </span><span class="si">{</span><span class="n">name_policy</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">sync_imported</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
                <span class="n">onto</span><span class="o">.</span><span class="n">sync_attributes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator for all relations.&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Ontology.get_relations() is deprecated. Use &quot;</span>
            <span class="s2">&quot;onto.object_properties() instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a dict with annotations for `entity`.  Entity may be given</span>
<span class="sd">        either as a ThingClass object or as a label.&quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;Ontology.get_annotations(entity) is deprecated. Use &quot;</span>
            <span class="s2">&quot;entity.get_annotations() instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)}</span>
        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">():</span>
            <span class="n">res</span><span class="p">[</span><span class="n">annotation</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">first</span><span class="p">()]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_triples</span><span class="p">(</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">annotation</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="kc">None</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">get_branch</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root</span><span class="p">,</span>
        <span class="n">leaves</span><span class="o">=</span><span class="p">(),</span>
        <span class="n">include_leaves</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">strict_leaves</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a set with all direct and indirect subclasses of `root`.</span>
<span class="sd">        Any subclass found in the sequence `leaves` will be included in</span>
<span class="sd">        the returned list, but its subclasses will not.  The elements</span>
<span class="sd">        of `leaves` may be ThingClass objects or labels.</span>

<span class="sd">        Subclasses of any subclass found in the sequence `leaves` will</span>
<span class="sd">        be excluded from the returned list, where the elements of `leaves`</span>
<span class="sd">        may be ThingClass objects or labels.</span>

<span class="sd">        If `include_leaves` is true, the leaves are included in the returned</span>
<span class="sd">        list, otherwise they are not.</span>

<span class="sd">        If `strict_leaves` is true, any descendant of a leaf will be excluded</span>
<span class="sd">        in the returned set.</span>

<span class="sd">        If given, `exclude` may be a sequence of classes, including</span>
<span class="sd">        their subclasses, to exclude from the output.</span>

<span class="sd">        If `sort` is True, a list sorted according to depth and label</span>
<span class="sd">        will be returned instead of a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_branch</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">leaves</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">root</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">:</span>
                <span class="n">branch</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">root</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">subclasses</span><span class="p">():</span>
                    <span class="c1"># Defining a branch is actually quite tricky.  Consider</span>
                    <span class="c1"># the case:</span>
                    <span class="c1">#</span>
                    <span class="c1">#      L isA R</span>
                    <span class="c1">#      A isA L</span>
                    <span class="c1">#      A isA R</span>
                    <span class="c1">#</span>
                    <span class="c1"># where R is the root, L is a leaf and A is a direct</span>
                    <span class="c1"># child of both.  Logically, since A is a child of the</span>
                    <span class="c1"># leaf we want to skip A.  But a strait forward imple-</span>
                    <span class="c1"># mentation will see that A is a child of the root and</span>
                    <span class="c1"># include it.  Requireing that the R should be a strict</span>
                    <span class="c1"># parent of A solves this.</span>
                    <span class="k">if</span> <span class="n">root</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_parents</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                        <span class="n">branch</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_branch</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">leaves</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">branch</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="p">{</span>
                        <span class="n">root</span><span class="p">,</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="n">include_leaves</span>
                    <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">branch</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

        <span class="n">leaves</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">leaf</span>
            <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span>
        <span class="p">)</span>
        <span class="n">leaves</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">e</span>
                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">exclude</span>
            <span class="p">)</span>
            <span class="n">leaves</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>

        <span class="n">branch</span> <span class="o">=</span> <span class="n">_branch</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">leaves</span><span class="p">)</span>

        <span class="c1"># Exclude all descendants of any leaf</span>
        <span class="k">if</span> <span class="n">strict_leaves</span><span class="p">:</span>
            <span class="n">descendants</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">descendants</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">descendants</span><span class="p">:</span>
                    <span class="n">branch</span><span class="o">.</span><span class="n">difference_update</span><span class="p">(</span>
                        <span class="n">leaf</span><span class="o">.</span><span class="n">descendants</span><span class="p">(</span><span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="p">)</span>

        <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="n">branch</span><span class="o">.</span><span class="n">difference_update</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>

        <span class="c1"># Sort according to depth, then by label</span>
        <span class="k">if</span> <span class="n">sort</span><span class="p">:</span>
            <span class="n">branch</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="nb">sorted</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">asstring</span><span class="p">),</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">mro</span><span class="p">()),</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">branch</span>

    <span class="k">def</span> <span class="nf">is_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns true if entity is an individual.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">)</span>

    <span class="c1"># FIXME - deprecate this method as soon the ThingClass property</span>
    <span class="c1">#         `defined_class` works correct in Owlready2</span>
    <span class="k">def</span> <span class="nf">is_defined</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns true if the entity is a defined class.</span>

<span class="sd">        Deprecated, use the `is_defined` property of the classes</span>
<span class="sd">        (ThingClass subclasses) instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;This method is deprecated.  Use the `is_defined` property of &quot;</span>
            <span class="s2">&quot;the classes instad.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;equivalent_to&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">bool</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">equivalent_to</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_iri</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the version number of the ontology as inferred from the</span>
<span class="sd">        owl:versionIRI tag or, if owl:versionIRI is not found, from</span>
<span class="sd">        owl:versionINFO.</span>

<span class="sd">        If `as_iri` is True, the full versionIRI is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">version_iri_storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span>
            <span class="s2">&quot;http://www.w3.org/2002/07/owl#versionIRI&quot;</span>
        <span class="p">)</span>
        <span class="n">tokens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_triples</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">version_iri_storid</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">tokens</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">as_iri</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;No owl:versionIRI &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;in Ontology </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="si">!r}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Search for owl:versionInfo with as_iri=False&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">tokens</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">version_iri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">as_iri</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">version_iri</span>
            <span class="k">return</span> <span class="n">infer_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="p">,</span> <span class="n">version_iri</span><span class="p">)</span>

        <span class="n">version_info_storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span>
            <span class="s2">&quot;http://www.w3.org/2002/07/owl#versionInfo&quot;</span>
        <span class="p">)</span>
        <span class="n">tokens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_triples</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">version_info_storid</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">tokens</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;No versionIRI or versionInfo &quot;</span> <span class="sa">f</span><span class="s2">&quot;in Ontology </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="si">!r}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">version_info</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">version_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;^^&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign version to ontology by asigning owl:versionIRI.</span>

<span class="sd">        If `version` but not `version_iri` is provided, the version</span>
<span class="sd">        IRI will be the combination of `base_iri` and `version`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_version_iri</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2002/07/owl#versionIRI&quot;</span>
        <span class="n">version_iri_storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">_version_iri</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_obj_triple_spo</span><span class="p">(</span>  <span class="c1"># pylint: disable=unexpected-keyword-arg</span>
            <span class="c1"># For some reason _has_obj_triples_spo exists in both</span>
            <span class="c1"># owlready2.namespace.Namespace (with arguments subject/predicate)</span>
            <span class="c1"># and in owlready2.triplelite._GraphManager (with arguments s/p)</span>
            <span class="c1"># owlready2.Ontology inherits from Namespace directly</span>
            <span class="c1"># and pylint checks that.</span>
            <span class="c1"># It actually accesses the one in triplelite.</span>
            <span class="c1"># subject=self.storid, predicate=version_iri_storid</span>
            <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span>
            <span class="n">p</span><span class="o">=</span><span class="n">version_iri_storid</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_del_obj_triple_spo</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">version_iri_storid</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">version_iri</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">version</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;Either `version` or `version_iri` must be provided&quot;</span>
                <span class="p">)</span>
            <span class="n">head</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">version_iri</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">head</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">tail</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_add_obj_triple_spo</span><span class="p">(</span>
            <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span>
            <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">_version_iri</span><span class="p">),</span>
            <span class="n">o</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">version_iri</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new graph object.  See  emmo.graph.OntoGraph.</span>

<span class="sd">        Note that this method requires the Python graphviz package.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=import-outside-toplevel,cyclic-import</span>
        <span class="kn">from</span> <span class="nn">ontopy.graph</span> <span class="kn">import</span> <span class="n">OntoGraph</span>

        <span class="k">return</span> <span class="n">OntoGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">common_ancestors</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of common ancestors for `cls1` and `cls2`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">cls1</span><span class="o">.</span><span class="n">ancestors</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">cls2</span><span class="o">.</span><span class="n">ancestors</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">number_of_generations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descendant</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return shortest distance from ancestor to descendant&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ancestor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">descendant</span><span class="o">.</span><span class="n">ancestors</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Descendant is not a descendant of ancestor&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_of_generations</span><span class="p">(</span><span class="n">descendant</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_number_of_generations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descendant</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Recursive help function to number_of_generations(), return</span>
<span class="sd">        distance between a ancestor-descendant pair (counter+1).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">descendant</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">ancestor</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">counter</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_number_of_generations</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">,</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">descendant</span><span class="o">.</span><span class="n">get_parents</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ancestor</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">counter</span>

    <span class="k">def</span> <span class="nf">closest_common_ancestors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list with closest_common_ancestor for cls1 and cls2&quot;&quot;&quot;</span>
        <span class="n">distances</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ancestor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_ancestors</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
            <span class="n">distances</span><span class="p">[</span><span class="n">ancestor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span>
                <span class="n">cls1</span><span class="p">,</span> <span class="n">ancestor</span>
            <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cls2</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">ancestor</span>
            <span class="k">for</span> <span class="n">ancestor</span><span class="p">,</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">distances</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">distance</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">distances</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">closest_common_ancestor</span><span class="p">(</span><span class="o">*</span><span class="n">classes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns closest_common_ancestor for the given classes.&quot;&quot;&quot;</span>
        <span class="n">mros</span> <span class="o">=</span> <span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">]</span>
        <span class="n">track</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">mros</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">mro</span> <span class="ow">in</span> <span class="n">mros</span><span class="p">:</span>
                <span class="n">cur</span> <span class="o">=</span> <span class="n">mro</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">track</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">track</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">classes</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">cur</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mro</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">mros</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mro</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">EMMOntoPyException</span><span class="p">(</span>
            <span class="s2">&quot;A closest common ancestor should always exist !&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ancestors</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">classes</span><span class="p">:</span> <span class="s2">&quot;Union[List, ThingClass]&quot;</span><span class="p">,</span>
        <span class="n">closest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">generations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return ancestors of all classes in `classes`.</span>
<span class="sd">        Args:</span>
<span class="sd">            classes: class(es) for which ancestors should be returned.</span>
<span class="sd">            generations: Include this number of generations, default is all.</span>
<span class="sd">            closest: If True, return all ancestors up to and including the</span>
<span class="sd">                closest common ancestor. Return all if False.</span>
<span class="sd">            strict: If True returns only real ancestors, i.e. `classes` are</span>
<span class="sd">                are not included in the returned set.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Set of ancestors to `classes`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">classes</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">classes</span><span class="p">]</span>

        <span class="n">ancestors</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">classes</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ancestors</span>

        <span class="k">def</span> <span class="nf">addancestors</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">subject</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">get_parents</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                    <span class="n">subject</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
                    <span class="n">addancestors</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">counter</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">closest</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">generations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Only one of `generations` or `closest` may be specified.&quot;</span>
                <span class="p">)</span>

            <span class="n">closest_ancestor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closest_common_ancestor</span><span class="p">(</span><span class="o">*</span><span class="n">classes</span><span class="p">)</span>
            <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
                <span class="n">ancestors</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="n">anc</span>
                    <span class="k">for</span> <span class="n">anc</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">closest_ancestor</span> <span class="ow">in</span> <span class="n">anc</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">generations</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
                <span class="n">addancestors</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">generations</span><span class="p">,</span> <span class="n">ancestors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ancestors</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ancestors</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ancestors</span>

    <span class="k">def</span> <span class="nf">get_descendants</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">classes</span><span class="p">:</span> <span class="s2">&quot;Union[List, ThingClass]&quot;</span><span class="p">,</span>
        <span class="n">generations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">common</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return descendants/subclasses of all classes in `classes`.</span>
<span class="sd">        Args:</span>
<span class="sd">            classes: class(es) for which descendants are desired.</span>
<span class="sd">            common: whether to only return descendants common to all classes.</span>
<span class="sd">            generations: Include this number of generations, default is all.</span>
<span class="sd">        Returns:</span>
<span class="sd">            A set of descendants for given number of generations.</span>
<span class="sd">            If &#39;common&#39;=True, the common descendants are returned</span>
<span class="sd">            within the specified number of generations.</span>
<span class="sd">            &#39;generations&#39; defaults to all.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">classes</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">classes</span><span class="p">]</span>

        <span class="n">descendants</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">}</span>

        <span class="k">def</span> <span class="nf">_children_recursively</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">newentity</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">descendants</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Helper function to get all children up to generation.&quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children_of</span><span class="p">(</span><span class="n">newentity</span><span class="p">):</span>
                <span class="n">descendants</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="n">generations</span><span class="p">:</span>
                    <span class="n">_children_recursively</span><span class="p">(</span><span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">descendants</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">generations</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">generations</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
                <span class="n">descendants</span><span class="p">[</span><span class="n">entity</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">descendants</span><span class="p">()</span>
                <span class="c1"># only include proper descendants</span>
                <span class="n">descendants</span><span class="p">[</span><span class="n">entity</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
                <span class="n">_children_recursively</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">descendants</span><span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="n">descendants</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">common</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span> <span class="n">results</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_wu_palmer_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Wu-Palmer measure for semantic similarity.</span>

<span class="sd">        Returns Wu-Palmer measure for semantic similarity between</span>
<span class="sd">        two concepts.</span>
<span class="sd">        Wu, Palmer; ACL 94: Proceedings of the 32nd annual meeting on</span>
<span class="sd">        Association for Computational Linguistics, June 1994.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cca</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closest_common_ancestor</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">)</span>
        <span class="n">ccadepth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cca</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thing</span><span class="p">)</span>
        <span class="n">generations1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cca</span><span class="p">)</span>
        <span class="n">generations2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cls2</span><span class="p">,</span> <span class="n">cca</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ccadepth</span> <span class="o">/</span> <span class="p">(</span><span class="n">generations1</span> <span class="o">+</span> <span class="n">generations2</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ccadepth</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">new_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">ThingClass</span><span class="p">,</span>
            <span class="n">ObjectPropertyClass</span><span class="p">,</span>
            <span class="n">DataPropertyClass</span><span class="p">,</span>
            <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
            <span class="n">Iterable</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">entitytype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span>
                <span class="nb">str</span><span class="p">,</span>
                <span class="n">ThingClass</span><span class="p">,</span>
                <span class="n">ObjectPropertyClass</span><span class="p">,</span>
                <span class="n">DataPropertyClass</span><span class="p">,</span>
                <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span>
        <span class="n">preflabel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span>
        <span class="n">ThingClass</span><span class="p">,</span>
        <span class="n">ObjectPropertyClass</span><span class="p">,</span>
        <span class="n">DataPropertyClass</span><span class="p">,</span>
        <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
    <span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and return new entity</span>

<span class="sd">        Args:</span>
<span class="sd">            name: name of the entity</span>
<span class="sd">            parent: parent(s) of the entity</span>
<span class="sd">            entitytype: type of the entity,</span>
<span class="sd">                default is &#39;class&#39; (str) &#39;ThingClass&#39; (owlready2 Python class).</span>
<span class="sd">                Other options</span>
<span class="sd">                are &#39;data_property&#39;, &#39;object_property&#39;,</span>
<span class="sd">                &#39;annotation_property&#39; (strings) or the</span>
<span class="sd">                Python classes ObjectPropertyClass,</span>
<span class="sd">                DataPropertyClass and AnnotationProperty classes.</span>
<span class="sd">            preflabel: if given, add this as a skos:prefLabel annotation</span>
<span class="sd">                to the new entity.  If None (default), `name` will</span>
<span class="sd">                be added as prefLabel if skos:prefLabel is in the ontology</span>
<span class="sd">                and listed in `self.label_annotations`.  Set `preflabel` to</span>
<span class="sd">                False, to avoid assigning a prefLabel.</span>

<span class="sd">        Returns:</span>
<span class="sd">            the new entity.</span>

<span class="sd">        Throws exception if name consists of more than one word, if type is not</span>
<span class="sd">        one of the allowed types, or if parent is not of the correct type.</span>
<span class="sd">        By default, the parent is Thing.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=invalid-name</span>
        <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabelDefinitionError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error in label name definition &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Label consists of more than one word.&quot;</span>
            <span class="p">)</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="n">parent</span><span class="p">,)</span>
        <span class="k">if</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;class&quot;</span><span class="p">:</span>
            <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span>
        <span class="k">elif</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;data_property&quot;</span><span class="p">:</span>
            <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span>
        <span class="k">elif</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;object_property&quot;</span><span class="p">:</span>
            <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span>
        <span class="k">elif</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;annotation_property&quot;</span><span class="p">:</span>
            <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">AnnotationPropertyClass</span>
        <span class="k">elif</span> <span class="n">entitytype</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">ThingClass</span><span class="p">,</span>
            <span class="n">ObjectPropertyClass</span><span class="p">,</span>
            <span class="n">DataPropertyClass</span><span class="p">,</span>
            <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">parenttype</span> <span class="o">=</span> <span class="n">entitytype</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EntityClassDefinitionError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error in entity type definition: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">entitytype</span><span class="si">}</span><span class="s2">&#39; is not a valid entity type.&quot;</span>
            <span class="p">)</span>
        <span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thing</span><span class="p">,</span> <span class="n">parenttype</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">EntityClassDefinitionError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Error in parent definition: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">thing</span><span class="si">}</span><span class="s2">&#39; is not an </span><span class="si">{</span><span class="n">parenttype</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">new_class</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">)</span>

            <span class="n">preflabel_iri</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2004/02/skos/core#prefLabel&quot;</span>
            <span class="k">if</span> <span class="n">preflabel</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">preflabel_iri</span><span class="p">]:</span>
                    <span class="n">pref_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_annotation_property</span><span class="p">(</span>
                        <span class="s2">&quot;prefLabel&quot;</span><span class="p">,</span>
                        <span class="n">parent</span><span class="o">=</span><span class="p">[</span><span class="n">owlready2</span><span class="o">.</span><span class="n">AnnotationProperty</span><span class="p">],</span>
                    <span class="p">)</span>
                    <span class="n">pref_label</span><span class="o">.</span><span class="n">iri</span> <span class="o">=</span> <span class="n">preflabel_iri</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="n">english</span><span class="p">(</span><span class="n">preflabel</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">preflabel</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">preflabel_iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">preflabel_iri</span><span class="p">]</span>
            <span class="p">):</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="n">english</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">entity</span>

    <span class="c1"># Method that creates new ThingClass using new_entity</span>
    <span class="k">def</span> <span class="nf">new_class</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ThingClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ThingClass</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and return new class.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: name of the class</span>
<span class="sd">            parent: parent(s) of the class</span>

<span class="sd">        Returns:</span>
<span class="sd">            the new class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">)</span>

    <span class="c1"># Method that creates new ObjectPropertyClass using new_entity</span>
    <span class="k">def</span> <span class="nf">new_object_property</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ObjectPropertyClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectPropertyClass</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and return new object property.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: name of the object property</span>
<span class="sd">            parent: parent(s) of the object property</span>

<span class="sd">        Returns:</span>
<span class="sd">            the new object property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;object_property&quot;</span><span class="p">)</span>

    <span class="c1"># Method that creates new DataPropertyClass using new_entity</span>
    <span class="k">def</span> <span class="nf">new_data_property</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataPropertyClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataPropertyClass</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and return new data property.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: name of the data property</span>
<span class="sd">            parent: parent(s) of the data property</span>

<span class="sd">        Returns:</span>
<span class="sd">            the new data property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;data_property&quot;</span><span class="p">)</span>

    <span class="c1"># Method that creates new AnnotationPropertyClass using new_entity</span>
    <span class="k">def</span> <span class="nf">new_annotation_property</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AnnotationPropertyClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnnotationPropertyClass</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and return new annotation property.</span>

<span class="sd">        Args:</span>
<span class="sd">            name: name of the annotation property</span>
<span class="sd">            parent: parent(s) of the annotation property</span>

<span class="sd">        Returns:</span>
<span class="sd">            the new annotation property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;annotation_property&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="ontopy.ontology.Ontology.colon_in_label" class="doc doc-heading">
<code class="highlight language-python"><span class="n">colon_in_label</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.colon_in_label" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether to accept colon in name-part of IRI.  If true, the name cannot be prefixed.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="ontopy.ontology.Ontology.dir_imported" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dir_imported</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.dir_imported" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether to include imported ontologies in dir() listing.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="ontopy.ontology.Ontology.dir_label" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dir_label</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.dir_label" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether to include entity label in dir() listing.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="ontopy.ontology.Ontology.dir_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dir_name</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.dir_name" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether to include entity name in dir() listing.</p>
    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="ontopy.ontology.Ontology.dir_preflabel" class="doc doc-heading">
<code class="highlight language-python"><span class="n">dir_preflabel</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-writable"><code>writable</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.dir_preflabel" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Whether to include entity prefLabel in dir() listing.</p>
    </div>

  </div>







  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.add_label_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_label_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.add_label_annotation" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds label annotation used by get_by_label().</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_label_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds label annotation used by get_by_label().&quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;Ontology.add_label_annotations() is deprecated. &quot;</span>
        <span class="s2">&quot;Direct modify the `label_annotations` attribute instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="s2">&quot;iri&quot;</span><span class="p">):</span>
        <span class="n">iri</span> <span class="o">=</span> <span class="n">iri</span><span class="o">.</span><span class="n">iri</span>
    <span class="k">if</span> <span class="n">iri</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iri</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.annotation_properties" class="doc doc-heading">
<code class="highlight language-python"><span class="n">annotation_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.annotation_properties" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns an generator over all annotation_properties.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>imported</code></td>
        <td></td>
        <td><p>if <code>True</code>, entities in imported ontologies
are also returned.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">annotation_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns an generator over all annotation_properties.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        imported: if `True`, entities in imported ontologies</span>
<span class="sd">            are also returned.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;annotation_properties&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.classes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.classes" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns an generator over all classes.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>imported</code></td>
        <td></td>
        <td><p>if <code>True</code>, entities in imported ontologies
are also returned.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns an generator over all classes.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        imported: if `True`, entities in imported ontologies</span>
<span class="sd">            are also returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;classes&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.closest_common_ancestor" class="doc doc-heading">
<code class="highlight language-python"><span class="n">closest_common_ancestor</span><span class="p">(</span><span class="o">*</span><span class="n">classes</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.closest_common_ancestor" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns closest_common_ancestor for the given classes.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">closest_common_ancestor</span><span class="p">(</span><span class="o">*</span><span class="n">classes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns closest_common_ancestor for the given classes.&quot;&quot;&quot;</span>
    <span class="n">mros</span> <span class="o">=</span> <span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">]</span>
    <span class="n">track</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">mros</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">mro</span> <span class="ow">in</span> <span class="n">mros</span><span class="p">:</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">mro</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">track</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">track</span><span class="p">[</span><span class="n">cur</span><span class="p">]</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">classes</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">cur</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mro</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mros</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mro</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">EMMOntoPyException</span><span class="p">(</span>
        <span class="s2">&quot;A closest common ancestor should always exist !&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.closest_common_ancestors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">closest_common_ancestors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.closest_common_ancestors" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a list with closest_common_ancestor for cls1 and cls2</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">closest_common_ancestors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list with closest_common_ancestor for cls1 and cls2&quot;&quot;&quot;</span>
    <span class="n">distances</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">ancestor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_ancestors</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
        <span class="n">distances</span><span class="p">[</span><span class="n">ancestor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span>
            <span class="n">cls1</span><span class="p">,</span> <span class="n">ancestor</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cls2</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">ancestor</span>
        <span class="k">for</span> <span class="n">ancestor</span><span class="p">,</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">distances</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">distance</span> <span class="o">==</span> <span class="nb">min</span><span class="p">(</span><span class="n">distances</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.common_ancestors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">common_ancestors</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#ontopy.ontology.Ontology.common_ancestors" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return a list of common ancestors for <code>cls1</code> and <code>cls2</code>.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">common_ancestors</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list of common ancestors for `cls1` and `cls2`.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">cls1</span><span class="o">.</span><span class="n">ancestors</span><span class="p">())</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">cls2</span><span class="o">.</span><span class="n">ancestors</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.data_properties" class="doc doc-heading">
<code class="highlight language-python"><span class="n">data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.data_properties" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns an generator over all data_properties.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>imported</code></td>
        <td></td>
        <td><p>if <code>True</code>, entities in imported ontologies
are also returned.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns an generator over all data_properties.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        imported: if `True`, entities in imported ontologies</span>
<span class="sd">            are also returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;data_properties&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_ancestors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_ancestors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">classes</span><span class="p">,</span> <span class="n">closest</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">generations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_ancestors" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return ancestors of all classes in <code>classes</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>classes</code></td>
        <td><code>Union[List, ThingClass]</code></td>
        <td><p>class(es) for which ancestors should be returned.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>generations</code></td>
        <td><code>int</code></td>
        <td><p>Include this number of generations, default is all.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>closest</code></td>
        <td><code>bool</code></td>
        <td><p>If True, return all ancestors up to and including the
closest common ancestor. Return all if False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>strict</code></td>
        <td><code>bool</code></td>
        <td><p>If True returns only real ancestors, i.e. <code>classes</code> are
are not included in the returned set.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>set</code></td>
      <td><p>Set of ancestors to <code>classes</code>.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_ancestors</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">classes</span><span class="p">:</span> <span class="s2">&quot;Union[List, ThingClass]&quot;</span><span class="p">,</span>
    <span class="n">closest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">generations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return ancestors of all classes in `classes`.</span>
<span class="sd">    Args:</span>
<span class="sd">        classes: class(es) for which ancestors should be returned.</span>
<span class="sd">        generations: Include this number of generations, default is all.</span>
<span class="sd">        closest: If True, return all ancestors up to and including the</span>
<span class="sd">            closest common ancestor. Return all if False.</span>
<span class="sd">        strict: If True returns only real ancestors, i.e. `classes` are</span>
<span class="sd">            are not included in the returned set.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Set of ancestors to `classes`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">classes</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
        <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">classes</span><span class="p">]</span>

    <span class="n">ancestors</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">classes</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ancestors</span>

    <span class="k">def</span> <span class="nf">addancestors</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">subject</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">get_parents</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">subject</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
                <span class="n">addancestors</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">counter</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">closest</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">generations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Only one of `generations` or `closest` may be specified.&quot;</span>
            <span class="p">)</span>

        <span class="n">closest_ancestor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closest_common_ancestor</span><span class="p">(</span><span class="o">*</span><span class="n">classes</span><span class="p">)</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
            <span class="n">ancestors</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="n">anc</span>
                <span class="k">for</span> <span class="n">anc</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">closest_ancestor</span> <span class="ow">in</span> <span class="n">anc</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">generations</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
            <span class="n">addancestors</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">generations</span><span class="p">,</span> <span class="n">ancestors</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ancestors</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ancestors</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">classes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ancestors</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_annotations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_annotations" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a dict with annotations for <code>entity</code>.  Entity may be given
either as a ThingClass object or as a label.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a dict with annotations for `entity`.  Entity may be given</span>
<span class="sd">    either as a ThingClass object or as a label.&quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;Ontology.get_annotations(entity) is deprecated. Use &quot;</span>
        <span class="s2">&quot;entity.get_annotations() instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)}</span>
    <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">():</span>
        <span class="n">res</span><span class="p">[</span><span class="n">annotation</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">first</span><span class="p">()]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_triples</span><span class="p">(</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">annotation</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_branch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">leaves</span><span class="o">=</span><span class="p">(),</span> <span class="n">include_leaves</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">strict_leaves</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_branch" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a set with all direct and indirect subclasses of <code>root</code>.
Any subclass found in the sequence <code>leaves</code> will be included in
the returned list, but its subclasses will not.  The elements
of <code>leaves</code> may be ThingClass objects or labels.</p>
<p>Subclasses of any subclass found in the sequence <code>leaves</code> will
be excluded from the returned list, where the elements of <code>leaves</code>
may be ThingClass objects or labels.</p>
<p>If <code>include_leaves</code> is true, the leaves are included in the returned
list, otherwise they are not.</p>
<p>If <code>strict_leaves</code> is true, any descendant of a leaf will be excluded
in the returned set.</p>
<p>If given, <code>exclude</code> may be a sequence of classes, including
their subclasses, to exclude from the output.</p>
<p>If <code>sort</code> is True, a list sorted according to depth and label
will be returned instead of a set.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_branch</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">root</span><span class="p">,</span>
    <span class="n">leaves</span><span class="o">=</span><span class="p">(),</span>
    <span class="n">include_leaves</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">strict_leaves</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a set with all direct and indirect subclasses of `root`.</span>
<span class="sd">    Any subclass found in the sequence `leaves` will be included in</span>
<span class="sd">    the returned list, but its subclasses will not.  The elements</span>
<span class="sd">    of `leaves` may be ThingClass objects or labels.</span>

<span class="sd">    Subclasses of any subclass found in the sequence `leaves` will</span>
<span class="sd">    be excluded from the returned list, where the elements of `leaves`</span>
<span class="sd">    may be ThingClass objects or labels.</span>

<span class="sd">    If `include_leaves` is true, the leaves are included in the returned</span>
<span class="sd">    list, otherwise they are not.</span>

<span class="sd">    If `strict_leaves` is true, any descendant of a leaf will be excluded</span>
<span class="sd">    in the returned set.</span>

<span class="sd">    If given, `exclude` may be a sequence of classes, including</span>
<span class="sd">    their subclasses, to exclude from the output.</span>

<span class="sd">    If `sort` is True, a list sorted according to depth and label</span>
<span class="sd">    will be returned instead of a set.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_branch</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">leaves</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">root</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">:</span>
            <span class="n">branch</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">root</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">subclasses</span><span class="p">():</span>
                <span class="c1"># Defining a branch is actually quite tricky.  Consider</span>
                <span class="c1"># the case:</span>
                <span class="c1">#</span>
                <span class="c1">#      L isA R</span>
                <span class="c1">#      A isA L</span>
                <span class="c1">#      A isA R</span>
                <span class="c1">#</span>
                <span class="c1"># where R is the root, L is a leaf and A is a direct</span>
                <span class="c1"># child of both.  Logically, since A is a child of the</span>
                <span class="c1"># leaf we want to skip A.  But a strait forward imple-</span>
                <span class="c1"># mentation will see that A is a child of the root and</span>
                <span class="c1"># include it.  Requireing that the R should be a strict</span>
                <span class="c1"># parent of A solves this.</span>
                <span class="k">if</span> <span class="n">root</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_parents</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                    <span class="n">branch</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">_branch</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">leaves</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">branch</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">{</span>
                    <span class="n">root</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="n">include_leaves</span>
                <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">branch</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="n">leaves</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">leaf</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">leaf</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">leaf</span>
        <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span>
    <span class="p">)</span>
    <span class="n">leaves</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">e</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">exclude</span>
        <span class="p">)</span>
        <span class="n">leaves</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>

    <span class="n">branch</span> <span class="o">=</span> <span class="n">_branch</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">leaves</span><span class="p">)</span>

    <span class="c1"># Exclude all descendants of any leaf</span>
    <span class="k">if</span> <span class="n">strict_leaves</span><span class="p">:</span>
        <span class="n">descendants</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">descendants</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">leaves</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">leaf</span> <span class="ow">in</span> <span class="n">descendants</span><span class="p">:</span>
                <span class="n">branch</span><span class="o">.</span><span class="n">difference_update</span><span class="p">(</span>
                    <span class="n">leaf</span><span class="o">.</span><span class="n">descendants</span><span class="p">(</span><span class="n">include_self</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="p">)</span>

    <span class="k">if</span> <span class="n">exclude</span><span class="p">:</span>
        <span class="n">branch</span><span class="o">.</span><span class="n">difference_update</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>

    <span class="c1"># Sort according to depth, then by label</span>
    <span class="k">if</span> <span class="n">sort</span><span class="p">:</span>
        <span class="n">branch</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
            <span class="nb">sorted</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">asstring</span><span class="p">),</span>
            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">mro</span><span class="p">()),</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">branch</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_by_label" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_by_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">label_annotations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colon_in_label</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_by_label" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns entity with label annotation <code>label</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>label</code></td>
        <td><code>str</code></td>
        <td><p>label so search for.
 May be written as 'label' or 'prefix:label'.
 get_by_label('prefix:label') ==
 get_by_label('label', prefix='prefix').</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>label_annotations</code></td>
        <td><code>str</code></td>
        <td><p>a sequence of label annotation names to look up.
 Defaults to the <code>label_annotations</code> property.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>prefix</code></td>
        <td><code>str</code></td>
        <td><p>if provided, it should be the last component of
 the base iri of an ontology (with trailing slash (/) or hash
 (#) stripped off).  The search for a matching label will be
 limited to this namespace.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>imported</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to also look for <code>label</code> in imported ontologies.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>colon_in_label</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to accept colon (:) in a label or name-part
 of IRI.  Defaults to the <code>colon_in_label</code> property of <code>self</code>.
 Setting this true cannot be combined with <code>prefix</code>.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>      <p>If several entities have the same label, only the one which is
found first is returned.Use get_by_label_all() to get all matches.</p>
<p>Note, if different prefixes are provided in the label and via
the <code>prefix</code> argument a warning will be issued and the
<code>prefix</code> argument will take precedence.</p>
<p>A NoSuchLabelError is raised if <code>label</code> cannot be found.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_by_label</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">label_annotations</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">imported</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">colon_in_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns entity with label annotation `label`.</span>

<span class="sd">    Arguments:</span>
<span class="sd">       label: label so search for.</span>
<span class="sd">           May be written as &#39;label&#39; or &#39;prefix:label&#39;.</span>
<span class="sd">           get_by_label(&#39;prefix:label&#39;) ==</span>
<span class="sd">           get_by_label(&#39;label&#39;, prefix=&#39;prefix&#39;).</span>
<span class="sd">       label_annotations: a sequence of label annotation names to look up.</span>
<span class="sd">           Defaults to the `label_annotations` property.</span>
<span class="sd">       prefix: if provided, it should be the last component of</span>
<span class="sd">           the base iri of an ontology (with trailing slash (/) or hash</span>
<span class="sd">           (#) stripped off).  The search for a matching label will be</span>
<span class="sd">           limited to this namespace.</span>
<span class="sd">       imported: Whether to also look for `label` in imported ontologies.</span>
<span class="sd">       colon_in_label: Whether to accept colon (:) in a label or name-part</span>
<span class="sd">           of IRI.  Defaults to the `colon_in_label` property of `self`.</span>
<span class="sd">           Setting this true cannot be combined with `prefix`.</span>

<span class="sd">    If several entities have the same label, only the one which is</span>
<span class="sd">    found first is returned.Use get_by_label_all() to get all matches.</span>

<span class="sd">    Note, if different prefixes are provided in the label and via</span>
<span class="sd">    the `prefix` argument a warning will be issued and the</span>
<span class="sd">    `prefix` argument will take precedence.</span>

<span class="sd">    A NoSuchLabelError is raised if `label` cannot be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=too-many-arguments,too-many-branches,invalid-name</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid label definition, must be a string: &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">label_annotations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">label_annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span>

    <span class="k">if</span> <span class="n">colon_in_label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">colon_in_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colon_in_label</span>
    <span class="k">if</span> <span class="n">colon_in_label</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`prefix` cannot be combined with `colon_in_label`&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">splitlabel</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splitlabel</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;//&quot;</span><span class="p">):</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">prefix</span> <span class="o">!=</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Prefix given both as argument (</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">) &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;and in label (</span><span class="si">{</span><span class="n">splitlabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">). &quot;</span>
                    <span class="s2">&quot;Prefix given in argument takes precedence. &quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="n">splitlabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
        <span class="n">entityset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label_all</span><span class="p">(</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">label_annotations</span><span class="o">=</span><span class="n">label_annotations</span><span class="p">,</span>
            <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">entityset</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">entityset</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">entityset</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">AmbiguousLabelError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Several entities have the same label &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;with prefix &#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
            <span class="p">)</span>
        <span class="k">raise</span> <span class="n">NoSuchLabelError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No label annotations matches for &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;with prefix &#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Label is a full IRI</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">entity</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">entity</span>

    <span class="n">get_triples</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_data_triples_spod_spod</span>
        <span class="k">if</span> <span class="n">imported</span>
        <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_triples_spod_spod</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">storid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_storids</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">get_triples</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">storid</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>

    <span class="c1"># Special labels</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="ow">and</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>

    <span class="c1"># Check if label is a name under base_iri</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span> <span class="o">+</span> <span class="n">label</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">entity</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">entity</span>

    <span class="c1"># Check label is the name of an entity</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">entity</span>

    <span class="k">raise</span> <span class="n">NoSuchLabelError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No label annotations matches &#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_by_label_all" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_by_label_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">label_annotations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_by_label_all" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns set of entities with label annotation <code>label</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>label</code></td>
        <td></td>
        <td><p>label so search for.
 May be written as 'label' or 'prefix:label'.  Wildcard matching
 using glob pattern is also supported if <code>exact_match</code> is set to
 false.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>label_annotations</code></td>
        <td></td>
        <td><p>a sequence of label annotation names to look up.
 Defaults to the <code>label_annotations</code> property.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>prefix</code></td>
        <td></td>
        <td><p>if provided, it should be the last component of
 the base iri of an ontology (with trailing slash (/) or hash
 (#) stripped off).  The search for a matching label will be
 limited to this namespace.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>exact_match</code></td>
        <td></td>
        <td><p>Do not treat "*" and brackets as special characters
 when matching.  May be useful if your ontology has labels
 containing such labels.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Set[Optional[owlready2.entity.EntityClass]]</code></td>
      <td><p>Set of all matching entities or an empty set if no matches
could be found.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_by_label_all</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">label</span><span class="p">,</span>
    <span class="n">label_annotations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">exact_match</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Set[Optional[owlready2.entity.EntityClass]]&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns set of entities with label annotation `label`.</span>

<span class="sd">    Arguments:</span>
<span class="sd">       label: label so search for.</span>
<span class="sd">           May be written as &#39;label&#39; or &#39;prefix:label&#39;.  Wildcard matching</span>
<span class="sd">           using glob pattern is also supported if `exact_match` is set to</span>
<span class="sd">           false.</span>
<span class="sd">       label_annotations: a sequence of label annotation names to look up.</span>
<span class="sd">           Defaults to the `label_annotations` property.</span>
<span class="sd">       prefix: if provided, it should be the last component of</span>
<span class="sd">           the base iri of an ontology (with trailing slash (/) or hash</span>
<span class="sd">           (#) stripped off).  The search for a matching label will be</span>
<span class="sd">           limited to this namespace.</span>
<span class="sd">       exact_match: Do not treat &quot;*&quot; and brackets as special characters</span>
<span class="sd">           when matching.  May be useful if your ontology has labels</span>
<span class="sd">           containing such labels.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Set of all matching entities or an empty set if no matches</span>
<span class="sd">        could be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid label definition, &quot;</span> <span class="sa">f</span><span class="s2">&quot;must be a string: </span><span class="si">{</span><span class="n">label</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">label</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid label definition, </span><span class="si">{</span><span class="n">label</span><span class="si">!r}</span><span class="s2"> contains spaces.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">label_annotations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">label_annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span>

    <span class="n">entities</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># Check label annotations</span>
    <span class="k">if</span> <span class="n">exact_match</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">storid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_storids</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">):</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_by_storid</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_get_data_triples_spod_spod</span><span class="p">(</span>
                    <span class="kc">None</span><span class="p">,</span> <span class="n">storid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">),</span> <span class="kc">None</span>
                <span class="p">)</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">storid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_storids</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">):</span>
            <span class="n">label_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">storid</span><span class="p">)</span>
            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">label_entity</span><span class="o">.</span><span class="n">name</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">label_entity</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="n">label_entity</span>
            <span class="p">)</span>
            <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">label</span><span class="p">}))</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="ow">and</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">:</span>
        <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span><span class="p">[</span><span class="n">label</span><span class="p">])</span>

    <span class="c1"># Check name-part of IRI</span>
    <span class="k">if</span> <span class="n">exact_match</span><span class="p">:</span>
        <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="n">ent</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()</span> <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()),</span> <span class="n">label</span>
        <span class="p">)</span>
        <span class="n">entities</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="n">ent</span> <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">()</span> <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">matches</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span>
            <span class="n">ent</span>
            <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">entities</span>
            <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">ontology</span><span class="o">.</span><span class="n">prefix</span> <span class="o">==</span> <span class="n">prefix</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">entities</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_descendants" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_descendants</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">classes</span><span class="p">,</span> <span class="n">generations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">common</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_descendants" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return descendants/subclasses of all classes in <code>classes</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>classes</code></td>
        <td><code>Union[List, ThingClass]</code></td>
        <td><p>class(es) for which descendants are desired.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>common</code></td>
        <td><code>bool</code></td>
        <td><p>whether to only return descendants common to all classes.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>generations</code></td>
        <td><code>int</code></td>
        <td><p>Include this number of generations, default is all.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>set</code></td>
      <td><p>A set of descendants for given number of generations.
If 'common'=True, the common descendants are returned
within the specified number of generations.
'generations' defaults to all.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_descendants</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">classes</span><span class="p">:</span> <span class="s2">&quot;Union[List, ThingClass]&quot;</span><span class="p">,</span>
    <span class="n">generations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">common</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return descendants/subclasses of all classes in `classes`.</span>
<span class="sd">    Args:</span>
<span class="sd">        classes: class(es) for which descendants are desired.</span>
<span class="sd">        common: whether to only return descendants common to all classes.</span>
<span class="sd">        generations: Include this number of generations, default is all.</span>
<span class="sd">    Returns:</span>
<span class="sd">        A set of descendants for given number of generations.</span>
<span class="sd">        If &#39;common&#39;=True, the common descendants are returned</span>
<span class="sd">        within the specified number of generations.</span>
<span class="sd">        &#39;generations&#39; defaults to all.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">classes</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
        <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">classes</span><span class="p">]</span>

    <span class="n">descendants</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_children_recursively</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">newentity</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">descendants</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper function to get all children up to generation.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children_of</span><span class="p">(</span><span class="n">newentity</span><span class="p">):</span>
            <span class="n">descendants</span><span class="p">[</span><span class="n">parent</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="n">generations</span><span class="p">:</span>
                <span class="n">_children_recursively</span><span class="p">(</span><span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">child</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">descendants</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">generations</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">generations</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
            <span class="n">descendants</span><span class="p">[</span><span class="n">entity</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">descendants</span><span class="p">()</span>
            <span class="c1"># only include proper descendants</span>
            <span class="n">descendants</span><span class="p">[</span><span class="n">entity</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
            <span class="n">_children_recursively</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">descendants</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">descendants</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">common</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">set</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="o">*</span><span class="nb">map</span><span class="p">(</span><span class="nb">set</span><span class="p">,</span> <span class="n">results</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_entities" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">individuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">object_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">data_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">annotation_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_entities" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return a generator over (optionally) all classes, individuals,
object_properties, data_properties and annotation_properties.</p>
<p>If <code>imported</code> is <code>True</code>, entities in imported ontologies will also
be included.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_entities</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">imported</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">classes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">individuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">object_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">data_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">annotation_properties</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a generator over (optionally) all classes, individuals,</span>
<span class="sd">    object_properties, data_properties and annotation_properties.</span>

<span class="sd">    If `imported` is `True`, entities in imported ontologies will also</span>
<span class="sd">    be included.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">generator</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">classes</span><span class="p">:</span>
        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">individuals</span><span class="p">:</span>
        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">individuals</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">object_properties</span><span class="p">:</span>
        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">data_properties</span><span class="p">:</span>
        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">annotation_properties</span><span class="p">:</span>
        <span class="n">generator</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">(</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">generator</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">entity</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_graph" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_graph" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a new graph object.  See  emmo.graph.OntoGraph.</p>
<p>Note that this method requires the Python graphviz package.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a new graph object.  See  emmo.graph.OntoGraph.</span>

<span class="sd">    Note that this method requires the Python graphviz package.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=import-outside-toplevel,cyclic-import</span>
    <span class="kn">from</span> <span class="nn">ontopy.graph</span> <span class="kn">import</span> <span class="n">OntoGraph</span>

    <span class="k">return</span> <span class="n">OntoGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_imported_ontologies" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_imported_ontologies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_imported_ontologies" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return a list with imported ontologies.</p>
<p>If <code>recursive</code> is <code>True</code>, ontologies imported by imported ontologies
are also returned.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_imported_ontologies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list with imported ontologies.</span>

<span class="sd">    If `recursive` is `True`, ontologies imported by imported ontologies</span>
<span class="sd">    are also returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">rec_imported</span><span class="p">(</span><span class="n">onto</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ontology</span> <span class="ow">in</span> <span class="n">onto</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ontology</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">imported</span><span class="p">:</span>
                <span class="n">imported</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>
                <span class="n">rec_imported</span><span class="p">(</span><span class="n">ontology</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
        <span class="n">imported</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">rec_imported</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">imported</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_relations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_relations" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a generator for all relations.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a generator for all relations.&quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;Ontology.get_relations() is deprecated. Use &quot;</span>
        <span class="s2">&quot;onto.object_properties() instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_root_classes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_root_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_root_classes" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a list or root classes.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_root_classes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list or root classes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="bp">cls</span>
        <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ancestors</span><span class="p">()</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="bp">cls</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">]))</span>
    <span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_root_data_properties" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_root_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_root_data_properties" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a list of root object properties.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_root_data_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list of root object properties.&quot;&quot;&quot;</span>
    <span class="n">props</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">props</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_a</span><span class="p">)]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_root_object_properties" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_root_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_root_object_properties" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a list of root object properties.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_root_object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list of root object properties.&quot;&quot;&quot;</span>
    <span class="n">props</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">props</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">props</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">is_a</span><span class="p">)]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_roots" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_roots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_roots" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns all class, object_property and data_property roots.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_roots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all class, object_property and data_property roots.&quot;&quot;&quot;</span>
    <span class="n">roots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_root_classes</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
    <span class="n">roots</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_root_object_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
    <span class="n">roots</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_root_data_properties</span><span class="p">(</span><span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">roots</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_unabbreviated_triples" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_unabbreviated_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_unabbreviated_triples" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns all matching triples unabbreviated.</p>
<p>If <code>blank</code> is given, it will be used to represent blank nodes.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_unabbreviated_triples</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all matching triples unabbreviated.</span>

<span class="sd">    If `blank` is given, it will be used to represent blank nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=invalid-name</span>
    <span class="k">return</span> <span class="n">_get_unabbreviated_triples</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_iri</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_version" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns the version number of the ontology as inferred from the
owl:versionIRI tag or, if owl:versionIRI is not found, from
owl:versionINFO.</p>
<p>If <code>as_iri</code> is True, the full versionIRI is returned.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">as_iri</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the version number of the ontology as inferred from the</span>
<span class="sd">    owl:versionIRI tag or, if owl:versionIRI is not found, from</span>
<span class="sd">    owl:versionINFO.</span>

<span class="sd">    If `as_iri` is True, the full versionIRI is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">version_iri_storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span>
        <span class="s2">&quot;http://www.w3.org/2002/07/owl#versionIRI&quot;</span>
    <span class="p">)</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_triples</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">version_iri_storid</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">tokens</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">as_iri</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s2">&quot;No owl:versionIRI &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;in Ontology </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="si">!r}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Search for owl:versionInfo with as_iri=False&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">tokens</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">version_iri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_unabbreviate</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">as_iri</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">version_iri</span>
        <span class="k">return</span> <span class="n">infer_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="p">,</span> <span class="n">version_iri</span><span class="p">)</span>

    <span class="n">version_info_storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span>
        <span class="s2">&quot;http://www.w3.org/2002/07/owl#versionInfo&quot;</span>
    <span class="p">)</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_triples</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">version_info_storid</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tokens</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s2">&quot;No versionIRI or versionInfo &quot;</span> <span class="sa">f</span><span class="s2">&quot;in Ontology </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="si">!r}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">version_info</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">version_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;^^&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.get_wu_palmer_measure" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wu_palmer_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.get_wu_palmer_measure" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return Wu-Palmer measure for semantic similarity.</p>
<p>Returns Wu-Palmer measure for semantic similarity between
two concepts.
Wu, Palmer; ACL 94: Proceedings of the 32nd annual meeting on
Association for Computational Linguistics, June 1994.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_wu_palmer_measure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return Wu-Palmer measure for semantic similarity.</span>

<span class="sd">    Returns Wu-Palmer measure for semantic similarity between</span>
<span class="sd">    two concepts.</span>
<span class="sd">    Wu, Palmer; ACL 94: Proceedings of the 32nd annual meeting on</span>
<span class="sd">    Association for Computational Linguistics, June 1994.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cca</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closest_common_ancestor</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cls2</span><span class="p">)</span>
    <span class="n">ccadepth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cca</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thing</span><span class="p">)</span>
    <span class="n">generations1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cls1</span><span class="p">,</span> <span class="n">cca</span><span class="p">)</span>
    <span class="n">generations2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_generations</span><span class="p">(</span><span class="n">cls2</span><span class="p">,</span> <span class="n">cca</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ccadepth</span> <span class="o">/</span> <span class="p">(</span><span class="n">generations1</span> <span class="o">+</span> <span class="n">generations2</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ccadepth</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.individuals" class="doc doc-heading">
<code class="highlight language-python"><span class="n">individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.individuals" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns an generator over all individuals.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>imported</code></td>
        <td></td>
        <td><p>if <code>True</code>, entities in imported ontologies
are also returned.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">individuals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns an generator over all individuals.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        imported: if `True`, entities in imported ontologies</span>
<span class="sd">            are also returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;individuals&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.is_defined" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_defined</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.is_defined" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns true if the entity is a defined class.</p>
<p>Deprecated, use the <code>is_defined</code> property of the classes
(ThingClass subclasses) instead.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_defined</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns true if the entity is a defined class.</span>

<span class="sd">    Deprecated, use the `is_defined` property of the classes</span>
<span class="sd">    (ThingClass subclasses) instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;This method is deprecated.  Use the `is_defined` property of &quot;</span>
        <span class="s2">&quot;the classes instad.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;equivalent_to&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">bool</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">equivalent_to</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.is_individual" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.is_individual" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns true if entity is an individual.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">is_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns true if entity is an individual.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_by_label</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.load" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">only_local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reload_if_newer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">url_from_catalog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">catalog_file</span><span class="o">=</span><span class="s1">&#39;catalog-v001.xml&#39;</span><span class="p">,</span> <span class="n">emmo_based</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix_emmo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.load" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Load the ontology.</p>
<h5 id="ontopy.ontology.Ontology.load--arguments">Arguments<a class="headerlink" href="#ontopy.ontology.Ontology.load--arguments" title="Permanent link">&para;</a></h5>
<div class="admonition only_local">
<p class="admonition-title">bool</p>
<p>Whether to only read local files.  This requires that you
have appended the path to the ontology to owlready2.onto_path.</p>
</div>
<div class="admonition filename">
<p class="admonition-title">str</p>
<p>Path to file to load the ontology from.  Defaults to <code>base_iri</code>
provided to get_ontology().</p>
</div>
<div class="admonition format">
<p class="admonition-title">str</p>
<p>Format of <code>filename</code>.  Default is inferred from <code>filename</code>
extension.</p>
</div>
<div class="admonition reload">
<p class="admonition-title">bool</p>
<p>Whether to reload the ontology if it is already loaded.</p>
</div>
<div class="admonition reload_if_newer">
<p class="admonition-title">bool</p>
<p>Whether to reload the ontology if the source has changed since
last time it was loaded.</p>
</div>
<div class="admonition url_from_catalog">
<p class="admonition-title">bool | None</p>
<p>Whether to use catalog file to resolve the location of <code>base_iri</code>.
If None, the catalog file is used if it exists in the same
directory as <code>filename</code>.</p>
</div>
<div class="admonition catalog_file">
<p class="admonition-title">str</p>
<p>Name of Protg catalog file in the same folder as the
ontology.  This option is used together with <code>only_local</code> and
defaults to "catalog-v001.xml".</p>
</div>
<div class="admonition emmo_based">
<p class="admonition-title">bool</p>
<p>Whether this is an EMMO-based ontology or not, default <code>True</code>.</p>
</div>
<p>prefix: defaults to self.get_namespace.name if</p>
<div class="admonition prefix_emmo">
<p class="admonition-title">bool, default None. If emmo_based is True it</p>
<p>defaults to True and sets the prefix of all imported ontologies
with base_iri starting with 'http://emmo.info/emmo' to emmo</p>
</div>
<div class="admonition kwargs">
<p class="admonition-title">Kwargs</p>
<p>Additional keyword arguments are passed on to
owlready2.Ontology.load().</p>
</div>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments,arguments-renamed</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">only_local</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
    <span class="n">reload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">reload_if_newer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">url_from_catalog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">catalog_file</span><span class="o">=</span><span class="s2">&quot;catalog-v001.xml&quot;</span><span class="p">,</span>
    <span class="n">emmo_based</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">prefix_emmo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the ontology.</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    only_local: bool</span>
<span class="sd">        Whether to only read local files.  This requires that you</span>
<span class="sd">        have appended the path to the ontology to owlready2.onto_path.</span>
<span class="sd">    filename: str</span>
<span class="sd">        Path to file to load the ontology from.  Defaults to `base_iri`</span>
<span class="sd">        provided to get_ontology().</span>
<span class="sd">    format: str</span>
<span class="sd">        Format of `filename`.  Default is inferred from `filename`</span>
<span class="sd">        extension.</span>
<span class="sd">    reload: bool</span>
<span class="sd">        Whether to reload the ontology if it is already loaded.</span>
<span class="sd">    reload_if_newer: bool</span>
<span class="sd">        Whether to reload the ontology if the source has changed since</span>
<span class="sd">        last time it was loaded.</span>
<span class="sd">    url_from_catalog: bool | None</span>
<span class="sd">        Whether to use catalog file to resolve the location of `base_iri`.</span>
<span class="sd">        If None, the catalog file is used if it exists in the same</span>
<span class="sd">        directory as `filename`.</span>
<span class="sd">    catalog_file: str</span>
<span class="sd">        Name of Protg catalog file in the same folder as the</span>
<span class="sd">        ontology.  This option is used together with `only_local` and</span>
<span class="sd">        defaults to &quot;catalog-v001.xml&quot;.</span>
<span class="sd">    emmo_based: bool</span>
<span class="sd">        Whether this is an EMMO-based ontology or not, default `True`.</span>
<span class="sd">    prefix: defaults to self.get_namespace.name if</span>
<span class="sd">    prefix_emmo: bool, default None. If emmo_based is True it</span>
<span class="sd">        defaults to True and sets the prefix of all imported ontologies</span>
<span class="sd">        with base_iri starting with &#39;http://emmo.info/emmo&#39; to emmo</span>
<span class="sd">    kwargs:</span>
<span class="sd">        Additional keyword arguments are passed on to</span>
<span class="sd">        owlready2.Ontology.load().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: make sure that `only_local` argument is respected...</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaded</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_load</span><span class="p">(</span>
        <span class="n">only_local</span><span class="o">=</span><span class="n">only_local</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="n">reload</span><span class="o">=</span><span class="n">reload</span><span class="p">,</span>
        <span class="n">reload_if_newer</span><span class="o">=</span><span class="n">reload_if_newer</span><span class="p">,</span>
        <span class="n">url_from_catalog</span><span class="o">=</span><span class="n">url_from_catalog</span><span class="p">,</span>
        <span class="n">catalog_file</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Enable optimised search by get_by_label()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">emmo_based</span><span class="p">:</span>
        <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="s2">&quot;http://www.w3.org/2002/07/owl#topObjectProperty&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_special_labels</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Thing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">,</span>
            <span class="s2">&quot;Nothing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Nothing</span><span class="p">,</span>
            <span class="s2">&quot;topObjectProperty&quot;</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span>
            <span class="s2">&quot;owl:Thing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Thing</span><span class="p">,</span>
            <span class="s2">&quot;owl:Nothing&quot;</span><span class="p">:</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">Nothing</span><span class="p">,</span>
            <span class="s2">&quot;owl:topObjectProperty&quot;</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="c1"># set prefix if another prefix is desired</span>
    <span class="c1"># if we do this, shouldn&#39;t we make the name of all</span>
    <span class="c1"># entities of the given ontology to the same?</span>
    <span class="k">if</span> <span class="n">prefix</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">if</span> <span class="n">emmo_based</span> <span class="ow">and</span> <span class="n">prefix_emmo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">prefix_emmo</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">prefix_emmo</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_common_prefix</span><span class="p">()</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.new_annotation_property" class="doc doc-heading">
<code class="highlight language-python"><span class="n">new_annotation_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.new_annotation_property" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create and return new annotation property.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the annotation property</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>parent</code></td>
        <td><code>Union[owlready2.annotation.AnnotationPropertyClass, collections.abc.Iterable]</code></td>
        <td><p>parent(s) of the annotation property</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>AnnotationPropertyClass</code></td>
      <td><p>the new annotation property.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">new_annotation_property</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AnnotationPropertyClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnnotationPropertyClass</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and return new annotation property.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: name of the annotation property</span>
<span class="sd">        parent: parent(s) of the annotation property</span>

<span class="sd">    Returns:</span>
<span class="sd">        the new annotation property.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;annotation_property&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.new_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">new_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.new_class" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create and return new class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the class</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>parent</code></td>
        <td><code>Union[owlready2.entity.ThingClass, collections.abc.Iterable]</code></td>
        <td><p>parent(s) of the class</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ThingClass</code></td>
      <td><p>the new class.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">new_class</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ThingClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ThingClass</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and return new class.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: name of the class</span>
<span class="sd">        parent: parent(s) of the class</span>

<span class="sd">    Returns:</span>
<span class="sd">        the new class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.new_data_property" class="doc doc-heading">
<code class="highlight language-python"><span class="n">new_data_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.new_data_property" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create and return new data property.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the data property</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>parent</code></td>
        <td><code>Union[owlready2.prop.DataPropertyClass, collections.abc.Iterable]</code></td>
        <td><p>parent(s) of the data property</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>DataPropertyClass</code></td>
      <td><p>the new data property.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">new_data_property</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataPropertyClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataPropertyClass</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and return new data property.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: name of the data property</span>
<span class="sd">        parent: parent(s) of the data property</span>

<span class="sd">    Returns:</span>
<span class="sd">        the new data property.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;data_property&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.new_entity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">new_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">entitytype</span><span class="o">=</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="n">preflabel</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.new_entity" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create and return new entity</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the entity</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>parent</code></td>
        <td><code>Union[owlready2.entity.ThingClass, owlready2.prop.ObjectPropertyClass, owlready2.prop.DataPropertyClass, owlready2.annotation.AnnotationPropertyClass, collections.abc.Iterable]</code></td>
        <td><p>parent(s) of the entity</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>entitytype</code></td>
        <td><code>Union[str, owlready2.entity.ThingClass, owlready2.prop.ObjectPropertyClass, owlready2.prop.DataPropertyClass, owlready2.annotation.AnnotationPropertyClass]</code></td>
        <td><p>type of the entity,
default is 'class' (str) 'ThingClass' (owlready2 Python class).
Other options
are 'data_property', 'object_property',
'annotation_property' (strings) or the
Python classes ObjectPropertyClass,
DataPropertyClass and AnnotationProperty classes.</p></td>
        <td><code>&#39;class&#39;</code></td>
      </tr>
      <tr>
        <td><code>preflabel</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>if given, add this as a skos:prefLabel annotation
to the new entity.  If None (default), <code>name</code> will
be added as prefLabel if skos:prefLabel is in the ontology
and listed in <code>self.label_annotations</code>.  Set <code>preflabel</code> to
False, to avoid assigning a prefLabel.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Union[owlready2.entity.ThingClass, owlready2.prop.ObjectPropertyClass, owlready2.prop.DataPropertyClass, owlready2.annotation.AnnotationPropertyClass]</code></td>
      <td><p>the new entity.</p></td>
    </tr>
  </tbody>
</table>      <p>Throws exception if name consists of more than one word, if type is not
one of the allowed types, or if parent is not of the correct type.
By default, the parent is Thing.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">new_entity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
        <span class="n">ThingClass</span><span class="p">,</span>
        <span class="n">ObjectPropertyClass</span><span class="p">,</span>
        <span class="n">DataPropertyClass</span><span class="p">,</span>
        <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
        <span class="n">Iterable</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">entitytype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
        <span class="n">Union</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">ThingClass</span><span class="p">,</span>
            <span class="n">ObjectPropertyClass</span><span class="p">,</span>
            <span class="n">DataPropertyClass</span><span class="p">,</span>
            <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span>
    <span class="n">preflabel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">ThingClass</span><span class="p">,</span>
    <span class="n">ObjectPropertyClass</span><span class="p">,</span>
    <span class="n">DataPropertyClass</span><span class="p">,</span>
    <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
<span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and return new entity</span>

<span class="sd">    Args:</span>
<span class="sd">        name: name of the entity</span>
<span class="sd">        parent: parent(s) of the entity</span>
<span class="sd">        entitytype: type of the entity,</span>
<span class="sd">            default is &#39;class&#39; (str) &#39;ThingClass&#39; (owlready2 Python class).</span>
<span class="sd">            Other options</span>
<span class="sd">            are &#39;data_property&#39;, &#39;object_property&#39;,</span>
<span class="sd">            &#39;annotation_property&#39; (strings) or the</span>
<span class="sd">            Python classes ObjectPropertyClass,</span>
<span class="sd">            DataPropertyClass and AnnotationProperty classes.</span>
<span class="sd">        preflabel: if given, add this as a skos:prefLabel annotation</span>
<span class="sd">            to the new entity.  If None (default), `name` will</span>
<span class="sd">            be added as prefLabel if skos:prefLabel is in the ontology</span>
<span class="sd">            and listed in `self.label_annotations`.  Set `preflabel` to</span>
<span class="sd">            False, to avoid assigning a prefLabel.</span>

<span class="sd">    Returns:</span>
<span class="sd">        the new entity.</span>

<span class="sd">    Throws exception if name consists of more than one word, if type is not</span>
<span class="sd">    one of the allowed types, or if parent is not of the correct type.</span>
<span class="sd">    By default, the parent is Thing.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=invalid-name</span>
    <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">LabelDefinitionError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error in label name definition &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Label consists of more than one word.&quot;</span>
        <span class="p">)</span>
    <span class="n">parents</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="n">parent</span><span class="p">,)</span>
    <span class="k">if</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;class&quot;</span><span class="p">:</span>
        <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ThingClass</span>
    <span class="k">elif</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;data_property&quot;</span><span class="p">:</span>
        <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">DataPropertyClass</span>
    <span class="k">elif</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;object_property&quot;</span><span class="p">:</span>
        <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">ObjectPropertyClass</span>
    <span class="k">elif</span> <span class="n">entitytype</span> <span class="o">==</span> <span class="s2">&quot;annotation_property&quot;</span><span class="p">:</span>
        <span class="n">parenttype</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">AnnotationPropertyClass</span>
    <span class="k">elif</span> <span class="n">entitytype</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="n">ThingClass</span><span class="p">,</span>
        <span class="n">ObjectPropertyClass</span><span class="p">,</span>
        <span class="n">DataPropertyClass</span><span class="p">,</span>
        <span class="n">AnnotationPropertyClass</span><span class="p">,</span>
    <span class="p">]:</span>
        <span class="n">parenttype</span> <span class="o">=</span> <span class="n">entitytype</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">EntityClassDefinitionError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Error in entity type definition: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">entitytype</span><span class="si">}</span><span class="s2">&#39; is not a valid entity type.&quot;</span>
        <span class="p">)</span>
    <span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thing</span><span class="p">,</span> <span class="n">parenttype</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">EntityClassDefinitionError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error in parent definition: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">thing</span><span class="si">}</span><span class="s2">&#39; is not an </span><span class="si">{</span><span class="n">parenttype</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">new_class</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">)</span>

        <span class="n">preflabel_iri</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2004/02/skos/core#prefLabel&quot;</span>
        <span class="k">if</span> <span class="n">preflabel</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">preflabel_iri</span><span class="p">]:</span>
                <span class="n">pref_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_annotation_property</span><span class="p">(</span>
                    <span class="s2">&quot;prefLabel&quot;</span><span class="p">,</span>
                    <span class="n">parent</span><span class="o">=</span><span class="p">[</span><span class="n">owlready2</span><span class="o">.</span><span class="n">AnnotationProperty</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="n">pref_label</span><span class="o">.</span><span class="n">iri</span> <span class="o">=</span> <span class="n">preflabel_iri</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="n">english</span><span class="p">(</span><span class="n">preflabel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">preflabel</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">preflabel_iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">[</span><span class="n">preflabel_iri</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="n">english</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">entity</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.new_object_property" class="doc doc-heading">
<code class="highlight language-python"><span class="n">new_object_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.new_object_property" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Create and return new object property.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the object property</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>parent</code></td>
        <td><code>Union[owlready2.prop.ObjectPropertyClass, collections.abc.Iterable]</code></td>
        <td><p>parent(s) of the object property</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ObjectPropertyClass</code></td>
      <td><p>the new object property.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">new_object_property</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ObjectPropertyClass</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ObjectPropertyClass</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create and return new object property.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: name of the object property</span>
<span class="sd">        parent: parent(s) of the object property</span>

<span class="sd">    Returns:</span>
<span class="sd">        the new object property.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_entity</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;object_property&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.number_of_generations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">number_of_generations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descendant</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.number_of_generations" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return shortest distance from ancestor to descendant</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">number_of_generations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">descendant</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return shortest distance from ancestor to descendant&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ancestor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">descendant</span><span class="o">.</span><span class="n">ancestors</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Descendant is not a descendant of ancestor&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number_of_generations</span><span class="p">(</span><span class="n">descendant</span><span class="p">,</span> <span class="n">ancestor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.object_properties" class="doc doc-heading">
<code class="highlight language-python"><span class="n">object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.object_properties" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns an generator over all object_properties.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>imported</code></td>
        <td></td>
        <td><p>if <code>True</code>, entities in imported ontologies
are also returned.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">object_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns an generator over all object_properties.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        imported: if `True`, entities in imported ontologies</span>
<span class="sd">            are also returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">(</span><span class="s2">&quot;object_properties&quot;</span><span class="p">,</span> <span class="n">imported</span><span class="o">=</span><span class="n">imported</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.remove_label_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_label_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.remove_label_annotation" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes label annotation used by get_by_label().</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_label_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes label annotation used by get_by_label().&quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;Ontology.remove_label_annotations() is deprecated. &quot;</span>
        <span class="s2">&quot;Direct modify the `label_annotations` attribute instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">iri</span><span class="p">,</span> <span class="s2">&quot;iri&quot;</span><span class="p">):</span>
        <span class="n">iri</span> <span class="o">=</span> <span class="n">iri</span><span class="o">.</span><span class="n">iri</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">iri</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.rename_entities" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rename_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;prefLabel&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;altLabel&#39;</span><span class="p">))</span></code>


<a href="#ontopy.ontology.Ontology.rename_entities" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set <code>name</code> of all entities to the first non-empty annotation in
<code>annotations</code>.</p>
<p>Warning, this method changes all IRIs in the ontology.  However,
it may be useful to make the ontology more readable and to work
with it together with a triple store.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">rename_entities</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">annotations</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;prefLabel&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;altLabel&quot;</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set `name` of all entities to the first non-empty annotation in</span>
<span class="sd">    `annotations`.</span>

<span class="sd">    Warning, this method changes all IRIs in the ontology.  However,</span>
<span class="sd">    it may be useful to make the ontology more readable and to work</span>
<span class="sd">    with it together with a triple store.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">annotation</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">annotation</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
                    <span class="k">break</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.save" class="doc doc-heading">
<code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">mkdir</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">squash</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">write_catalog_file</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">append_catalog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">catalog_file</span><span class="o">=</span><span class="s1">&#39;catalog-v001.xml&#39;</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.save" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Writes the ontology to file.</p>
<h5 id="ontopy.ontology.Ontology.save--parameters">Parameters<a class="headerlink" href="#ontopy.ontology.Ontology.save--parameters" title="Permanent link">&para;</a></h5>
<div class="admonition filename">
<p class="admonition-title">None | str | Path</p>
<p>Name of file to write to.  If None, it defaults to the name
of the ontology with <code>format</code> as file extension.</p>
</div>
<div class="admonition format">
<p class="admonition-title">str</p>
<p>Output format. The default is to infer it from <code>filename</code>.</p>
</div>
<div class="admonition dir">
<p class="admonition-title">str | Path</p>
<p>If <code>filename</code> is a relative path, it is a relative path to <code>dir</code>.</p>
</div>
<div class="admonition mkdir">
<p class="admonition-title">bool</p>
<p>Whether to create output directory if it does not exists.</p>
</div>
<div class="admonition owerwrite">
<p class="admonition-title">bool</p>
<p>If true and <code>filename</code> exists, remove the existing file before
saving.  The default is to append to an existing ontology.</p>
</div>
<div class="admonition recursive">
<p class="admonition-title">bool</p>
<p>Whether to save imported ontologies recursively.  This is
commonly combined with <code>filename=None</code>, <code>dir</code> and <code>mkdir</code>.</p>
</div>
<div class="admonition squash">
<p class="admonition-title">bool</p>
<p>If true, rdflib will be used to save the current ontology
together with all its sub-ontologies into <code>filename</code>.
It make no sense to combine this with <code>recursive</code>.</p>
</div>
<div class="admonition write_catalog_file">
<p class="admonition-title">bool</p>
<p>Whether to also write a catalog file to disk.</p>
</div>
<div class="admonition append_catalog">
<p class="admonition-title">bool</p>
<p>Whether to append to an existing catalog file.</p>
</div>
<div class="admonition catalog_file">
<p class="admonition-title">str | Path</p>
<p>Name of catalog file.  If not an absolute path, it is prepended
to <code>dir</code>.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span>
    <span class="n">mkdir</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">squash</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">write_catalog_file</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">append_catalog</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">catalog_file</span><span class="o">=</span><span class="s2">&quot;catalog-v001.xml&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Writes the ontology to file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename: None | str | Path</span>
<span class="sd">        Name of file to write to.  If None, it defaults to the name</span>
<span class="sd">        of the ontology with `format` as file extension.</span>
<span class="sd">    format: str</span>
<span class="sd">        Output format. The default is to infer it from `filename`.</span>
<span class="sd">    dir: str | Path</span>
<span class="sd">        If `filename` is a relative path, it is a relative path to `dir`.</span>
<span class="sd">    mkdir: bool</span>
<span class="sd">        Whether to create output directory if it does not exists.</span>
<span class="sd">    owerwrite: bool</span>
<span class="sd">        If true and `filename` exists, remove the existing file before</span>
<span class="sd">        saving.  The default is to append to an existing ontology.</span>
<span class="sd">    recursive: bool</span>
<span class="sd">        Whether to save imported ontologies recursively.  This is</span>
<span class="sd">        commonly combined with `filename=None`, `dir` and `mkdir`.</span>
<span class="sd">    squash: bool</span>
<span class="sd">        If true, rdflib will be used to save the current ontology</span>
<span class="sd">        together with all its sub-ontologies into `filename`.</span>
<span class="sd">        It make no sense to combine this with `recursive`.</span>
<span class="sd">    write_catalog_file: bool</span>
<span class="sd">        Whether to also write a catalog file to disk.</span>
<span class="sd">    append_catalog: bool</span>
<span class="sd">        Whether to append to an existing catalog file.</span>
<span class="sd">    catalog_file: str | Path</span>
<span class="sd">        Name of catalog file.  If not an absolute path, it is prepended</span>
<span class="sd">        to `dir`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># pylint: disable=redefined-builtin,too-many-arguments</span>
    <span class="c1"># pylint: disable=too-many-statements,too-many-branches</span>
    <span class="c1"># pylint: disable=too-many-locals,arguments-renamed</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_validate_installed_version</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="s2">&quot;rdflib&quot;</span><span class="p">,</span> <span class="n">min_version</span><span class="o">=</span><span class="s2">&quot;6.0.0&quot;</span>
    <span class="p">)</span> <span class="ow">and</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FMAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ttl&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="p">(</span>  <span class="c1"># pylint: disable=import-outside-toplevel</span>
            <span class="n">__version__</span> <span class="k">as</span> <span class="n">__rdflib_version__</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="n">IncompatibleVersion</span><span class="p">(</span>
                <span class="s2">&quot;To correctly convert to Turtle format, rdflib must be &quot;</span>
                <span class="s2">&quot;version 6.0.0 or greater, however, the detected rdflib &quot;</span>
                <span class="s2">&quot;version used by your Python interpreter is &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">__rdflib_version__</span><span class="si">!r}</span><span class="s2">. For more information see the &quot;</span>
                <span class="s2">&quot;&#39;Known issues&#39; section of the README.&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="n">revmap</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span><span class="p">:</span> <span class="n">key</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">FMAP</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">format</span><span class="p">:</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="n">revmap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;`filename` and `format` cannot both be None.&quot;</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="nb">dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span>

    <span class="k">if</span> <span class="n">mkdir</span><span class="p">:</span>
        <span class="n">outdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">outdir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">outdir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">format</span><span class="p">:</span>
        <span class="nb">format</span> <span class="o">=</span> <span class="n">guess_format</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">fmap</span><span class="o">=</span><span class="n">FMAP</span><span class="p">)</span>
    <span class="n">fmt</span> <span class="o">=</span> <span class="n">revmap</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">and</span> <span class="n">filename</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">EMMO</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Namespace</span><span class="p">(</span>  <span class="c1"># pylint:disable=invalid-name</span>
        <span class="s2">&quot;http://emmo.info/emmo#&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">squash</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;`recursive` and `squash` should not both be true&quot;</span>
            <span class="p">)</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
            <span class="n">obase</span> <span class="o">=</span> <span class="n">onto</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>
            <span class="n">newdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">obase</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
            <span class="n">onto</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
                <span class="nb">dir</span><span class="o">=</span><span class="n">newdir</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span>
                <span class="n">mkdir</span><span class="o">=</span><span class="n">mkdir</span><span class="p">,</span>
                <span class="n">overwrite</span><span class="o">=</span><span class="n">overwrite</span><span class="p">,</span>
                <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span>
                <span class="n">squash</span><span class="o">=</span><span class="n">squash</span><span class="p">,</span>
                <span class="n">write_catalog_file</span><span class="o">=</span><span class="n">write_catalog_file</span><span class="p">,</span>
                <span class="n">append_catalog</span><span class="o">=</span><span class="n">append_catalog</span><span class="p">,</span>
                <span class="n">catalog_file</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">squash</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="p">(</span>  <span class="c1"># pylint:disable=import-outside-toplevel</span>
            <span class="n">URIRef</span><span class="p">,</span>
            <span class="n">RDF</span><span class="p">,</span>
            <span class="n">OWL</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">as_rdflib_graph</span><span class="p">()</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">namespace_manager</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;emmo&quot;</span><span class="p">,</span> <span class="n">EMMO</span><span class="p">)</span>

        <span class="c1"># Remove anonymous namespace and imports</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">URIRef</span><span class="p">(</span><span class="s2">&quot;http://anonymous&quot;</span><span class="p">),</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">Ontology</span><span class="p">))</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">OWL</span><span class="o">.</span><span class="n">imports</span><span class="p">,</span> <span class="kc">None</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">triple</span> <span class="ow">in</span> <span class="n">imports</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>

        <span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">format</span> <span class="ow">in</span> <span class="n">OWLREADY2_FORMATS</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># The try-finally clause is needed for cleanup and because</span>
        <span class="c1"># we have to provide delete=False to NamedTemporaryFile</span>
        <span class="c1"># since Windows does not allow to reopen an already open</span>
        <span class="c1"># file.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span>
                <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;.owl&quot;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
                <span class="n">tmpfile</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">name</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;rdfxml&quot;</span><span class="p">)</span>
            <span class="n">graph</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">write_catalog_file</span><span class="p">:</span>
        <span class="n">mappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="n">onto</span><span class="p">):</span>
            <span class="n">obase</span> <span class="o">=</span> <span class="n">onto</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span>
            <span class="n">newdir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span> <span class="o">/</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">obase</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
            <span class="n">newpath</span> <span class="o">=</span> <span class="n">newdir</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">onto</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">relpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">newpath</span><span class="p">,</span> <span class="nb">dir</span><span class="p">)</span>
            <span class="n">mappings</span><span class="p">[</span><span class="n">onto</span><span class="o">.</span><span class="n">get_version</span><span class="p">(</span><span class="n">as_iri</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">relpath</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">imported</span> <span class="ow">in</span> <span class="n">onto</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
                <span class="n">append</span><span class="p">(</span><span class="n">imported</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">write_catalog</span><span class="p">(</span>
            <span class="n">mappings</span><span class="p">,</span>
            <span class="n">output</span><span class="o">=</span><span class="n">catalog_file</span><span class="p">,</span>
            <span class="n">directory</span><span class="o">=</span><span class="nb">dir</span><span class="p">,</span>
            <span class="n">append</span><span class="o">=</span><span class="n">append_catalog</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.set_common_prefix" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_common_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri_base</span><span class="o">=</span><span class="s1">&#39;http://emmo.info/emmo&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;emmo&#39;</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.set_common_prefix" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Set a common prefix for all imported ontologies
with the same first part of the base_iri.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>iri_base</code></td>
        <td><code>str</code></td>
        <td><p>The start of the base_iri to look for. Defaults to
the emmo base_iri http://emmo.info/emmo</p></td>
        <td><code>&#39;http://emmo.info/emmo&#39;</code></td>
      </tr>
      <tr>
        <td><code>prefix</code></td>
        <td><code>str</code></td>
        <td><p>the desired prefix. Defaults to emmo.</p></td>
        <td><code>&#39;emmo&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_common_prefix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">iri_base</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;http://emmo.info/emmo&quot;</span><span class="p">,</span>
    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;emmo&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set a common prefix for all imported ontologies</span>
<span class="sd">    with the same first part of the base_iri.</span>

<span class="sd">    Args:</span>
<span class="sd">        iri_base: The start of the base_iri to look for. Defaults to</span>
<span class="sd">            the emmo base_iri http://emmo.info/emmo</span>
<span class="sd">        prefix: the desired prefix. Defaults to emmo.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">iri_base</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
        <span class="n">onto</span><span class="o">.</span><span class="n">set_common_prefix</span><span class="p">(</span><span class="n">iri_base</span><span class="o">=</span><span class="n">iri_base</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.set_default_label_annotations" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_default_label_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.set_default_label_annotations" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets the default label annotations.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_default_label_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the default label annotations.&quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;Ontology.set_default_label_annotations() is deprecated. &quot;</span>
        <span class="s2">&quot;Default label annotations are set by Ontology.__init__(). &quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_annotations</span> <span class="o">=</span> <span class="n">DEFAULT_LABEL_ANNOTATIONS</span><span class="p">[:]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.set_version" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.set_version" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Assign version to ontology by asigning owl:versionIRI.</p>
<p>If <code>version</code> but not <code>version_iri</code> is provided, the version
IRI will be the combination of <code>base_iri</code> and <code>version</code>.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version_iri</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assign version to ontology by asigning owl:versionIRI.</span>

<span class="sd">    If `version` but not `version_iri` is provided, the version</span>
<span class="sd">    IRI will be the combination of `base_iri` and `version`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_version_iri</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2002/07/owl#versionIRI&quot;</span>
    <span class="n">version_iri_storid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">_version_iri</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_obj_triple_spo</span><span class="p">(</span>  <span class="c1"># pylint: disable=unexpected-keyword-arg</span>
        <span class="c1"># For some reason _has_obj_triples_spo exists in both</span>
        <span class="c1"># owlready2.namespace.Namespace (with arguments subject/predicate)</span>
        <span class="c1"># and in owlready2.triplelite._GraphManager (with arguments s/p)</span>
        <span class="c1"># owlready2.Ontology inherits from Namespace directly</span>
        <span class="c1"># and pylint checks that.</span>
        <span class="c1"># It actually accesses the one in triplelite.</span>
        <span class="c1"># subject=self.storid, predicate=version_iri_storid</span>
        <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span>
        <span class="n">p</span><span class="o">=</span><span class="n">version_iri_storid</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_del_obj_triple_spo</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">version_iri_storid</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">version_iri</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">version</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Either `version` or `version_iri` must be provided&quot;</span>
            <span class="p">)</span>
        <span class="n">head</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">version_iri</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">head</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">tail</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_add_obj_triple_spo</span><span class="p">(</span>
        <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">storid</span><span class="p">,</span>
        <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">_version_iri</span><span class="p">),</span>
        <span class="n">o</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">_abbreviate</span><span class="p">(</span><span class="n">version_iri</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.sync_attributes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sync_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_policy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">class_docstring</span><span class="o">=</span><span class="s1">&#39;comment&#39;</span><span class="p">,</span> <span class="n">sync_imported</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.sync_attributes" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>This method is intended to be called after you have added new
classes (typically via Python) to make sure that attributes like
<code>label</code> and <code>comments</code> are defined.</p>
<p>If a class, object property, data property or annotation
property in the current ontology has no label, the name of
the corresponding Python class will be assigned as label.</p>
<p>If a class, object property, data property or annotation
property has no comment, it will be assigned the docstring of
the corresponding Python class.</p>
<p><code>name_policy</code> specify wether and how the names in the ontology
should be updated.  Valid values are:
  None          not changed
  "uuid"        <code>name_prefix</code> followed by a global unique id (UUID).
                If the name is already valid accoridng to this standard
                it will not be regenerated.
  "sequential"  <code>name_prefix</code> followed a sequantial number.
EMMO conventions imply <code>name_policy=='uuid'</code>.</p>
<p>If <code>sync_imported</code> is true, all imported ontologies are also
updated.</p>
<p>The <code>class_docstring</code> argument specifies the annotation that
class docstrings are mapped to.  Defaults to "comment".</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sync_attributes</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-branches</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name_policy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">name_prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">class_docstring</span><span class="o">=</span><span class="s2">&quot;comment&quot;</span><span class="p">,</span>
    <span class="n">sync_imported</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This method is intended to be called after you have added new</span>
<span class="sd">    classes (typically via Python) to make sure that attributes like</span>
<span class="sd">    `label` and `comments` are defined.</span>

<span class="sd">    If a class, object property, data property or annotation</span>
<span class="sd">    property in the current ontology has no label, the name of</span>
<span class="sd">    the corresponding Python class will be assigned as label.</span>

<span class="sd">    If a class, object property, data property or annotation</span>
<span class="sd">    property has no comment, it will be assigned the docstring of</span>
<span class="sd">    the corresponding Python class.</span>

<span class="sd">    `name_policy` specify wether and how the names in the ontology</span>
<span class="sd">    should be updated.  Valid values are:</span>
<span class="sd">      None          not changed</span>
<span class="sd">      &quot;uuid&quot;        `name_prefix` followed by a global unique id (UUID).</span>
<span class="sd">                    If the name is already valid accoridng to this standard</span>
<span class="sd">                    it will not be regenerated.</span>
<span class="sd">      &quot;sequential&quot;  `name_prefix` followed a sequantial number.</span>
<span class="sd">    EMMO conventions imply ``name_policy==&#39;uuid&#39;``.</span>

<span class="sd">    If `sync_imported` is true, all imported ontologies are also</span>
<span class="sd">    updated.</span>

<span class="sd">    The `class_docstring` argument specifies the annotation that</span>
<span class="sd">    class docstrings are mapped to.  Defaults to &quot;comment&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">(),</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;prefLabel&quot;</span><span class="p">):</span>
            <span class="c1"># no prefLabel - create new annotation property..</span>
            <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
                <span class="c1"># pylint: disable=invalid-name,missing-class-docstring</span>
                <span class="c1"># pylint: disable=unused-variable</span>
                <span class="k">class</span> <span class="nc">prefLabel</span><span class="p">(</span><span class="n">owlready2</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
                    <span class="k">pass</span>

            <span class="bp">cls</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">locstr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefLabel</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">prefLabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locstr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">class_docstring</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;__doc__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span>
            <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">class_docstring</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">locstr</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">individuals</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="s2">&quot;prefLabel&quot;</span><span class="p">):</span>
            <span class="c1"># no prefLabel - create new annotation property..</span>
            <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
                <span class="c1"># pylint: disable=invalid-name,missing-class-docstring</span>
                <span class="c1"># pylint: disable=function-redefined</span>
                <span class="k">class</span> <span class="nc">prefLabel</span><span class="p">(</span><span class="n">owlready2</span><span class="o">.</span><span class="n">label</span><span class="p">):</span>
                    <span class="n">iri</span> <span class="o">=</span> <span class="s2">&quot;http://www.w3.org/2004/02/skos/core#prefLabel&quot;</span>

            <span class="n">ind</span><span class="o">.</span><span class="n">prefLabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">locstr</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">ind</span><span class="o">.</span><span class="n">prefLabel</span><span class="p">:</span>
            <span class="n">ind</span><span class="o">.</span><span class="n">prefLabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locstr</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">))</span>

    <span class="n">chain</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classes</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">individuals</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_properties</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_properties</span><span class="p">(),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_properties</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">name_policy</span> <span class="o">==</span> <span class="s2">&quot;uuid&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Passing the following means that the name is valid</span>
                <span class="c1"># and need not be regenerated.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">name_prefix</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span>
                <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="n">name_prefix</span><span class="p">),</span> <span class="n">version</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name_prefix</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                    <span class="n">uuid</span><span class="o">.</span><span class="n">uuid5</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">NAMESPACE_DNS</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>
    <span class="k">elif</span> <span class="n">name_policy</span> <span class="o">==</span> <span class="s2">&quot;sequential&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_iri</span><span class="si">}{</span><span class="n">name_prefix</span><span class="si">}{</span><span class="n">counter</span><span class="si">}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name_prefix</span><span class="si">}{</span><span class="n">counter</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">elif</span> <span class="n">name_policy</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid name_policy: </span><span class="si">{</span><span class="n">name_policy</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">sync_imported</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">onto</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">imported_ontologies</span><span class="p">:</span>
            <span class="n">onto</span><span class="o">.</span><span class="n">sync_attributes</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.sync_python_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sync_python_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;prefLabel&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;altLabel&#39;</span><span class="p">))</span></code>


<a href="#ontopy.ontology.Ontology.sync_python_names" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Update the <code>python_name</code> attribute of all properties.</p>
<p>The python_name attribute will be set to the first non-empty
annotation in the sequence of annotations in <code>annotations</code> for
the property.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sync_python_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;prefLabel&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;altLabel&quot;</span><span class="p">)):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the `python_name` attribute of all properties.</span>

<span class="sd">    The python_name attribute will be set to the first non-empty</span>
<span class="sd">    annotation in the sequence of annotations in `annotations` for</span>
<span class="sd">    the property.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">gen</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">gen</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">annotation</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">annotation</span><span class="p">):</span>
                    <span class="n">prop</span><span class="o">.</span><span class="n">python_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">annotation</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
                    <span class="k">break</span>

    <span class="n">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span>
            <span class="n">classes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">individuals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">object_properties</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">data_properties</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span>
            <span class="n">classes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">individuals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">annotation_properties</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.Ontology.sync_reasoner" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sync_reasoner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reasoner</span><span class="o">=</span><span class="s1">&#39;HermiT&#39;</span><span class="p">,</span> <span class="n">include_imported</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#ontopy.ontology.Ontology.sync_reasoner" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Update current ontology by running the given reasoner.</p>
<p>Supported values for <code>reasoner</code> are 'HermiT' (default), Pellet
and 'FaCT++'.</p>
<p>If <code>include_imported</code> is true, the reasoner will also reason
over imported ontologies.  Note that this may be <strong>very</strong> slow.</p>
<p>Keyword arguments are passed to the underlying owlready2 function.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">sync_reasoner</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">reasoner</span><span class="o">=</span><span class="s2">&quot;HermiT&quot;</span><span class="p">,</span> <span class="n">include_imported</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update current ontology by running the given reasoner.</span>

<span class="sd">    Supported values for `reasoner` are &#39;HermiT&#39; (default), Pellet</span>
<span class="sd">    and &#39;FaCT++&#39;.</span>

<span class="sd">    If `include_imported` is true, the reasoner will also reason</span>
<span class="sd">    over imported ontologies.  Note that this may be **very** slow.</span>

<span class="sd">    Keyword arguments are passed to the underlying owlready2 function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;FaCT++&quot;</span><span class="p">:</span>
        <span class="n">sync</span> <span class="o">=</span> <span class="n">sync_reasoner_factpp</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;Pellet&quot;</span><span class="p">:</span>
        <span class="n">sync</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">sync_reasoner_pellet</span>
    <span class="k">elif</span> <span class="n">reasoner</span> <span class="o">==</span> <span class="s2">&quot;HermiT&quot;</span><span class="p">:</span>
        <span class="n">sync</span> <span class="o">=</span> <span class="n">owlready2</span><span class="o">.</span><span class="n">sync_reasoner_hermit</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unknown reasoner &#39;</span><span class="si">{</span><span class="n">reasoner</span><span class="si">}</span><span class="s2">&#39;. Supported reasoners &quot;</span>
            <span class="s2">&quot;are &#39;Pellet&#39;, &#39;HermiT&#39; and &#39;FaCT++&#39;.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># For some reason we must visit all entities once before running</span>
    <span class="c1"># the reasoner...</span>
    <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_entities</span><span class="p">())</span>

    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">include_imported</span><span class="p">:</span>
            <span class="n">sync</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sync</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="ontopy.ontology.World" class="doc doc-heading">
        <code>
World            (<span title="owlready2.namespace.World">World</span>)
        </code>



<a href="#ontopy.ontology.World" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>A subclass of owlready2.World.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">World</span><span class="p">(</span><span class="n">owlready2</span><span class="o">.</span><span class="n">World</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A subclass of owlready2.World.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Caches stored in the world</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_catalogs</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># maps url to (mtime, iris, dirs)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iri_mappings</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># all iri mappings loaded so far</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ontology</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">base_iri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;emmo-inferred&quot;</span><span class="p">,</span>
        <span class="n">OntologyClass</span><span class="p">:</span> <span class="s2">&quot;owlready2.Ontology&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">label_annotations</span><span class="p">:</span> <span class="s2">&quot;Sequence&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Ontology&quot;</span><span class="p">:</span>
        <span class="c1"># pylint: disable=too-many-branches</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new Ontology from `base_iri`.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            base_iri: The base IRI of the ontology. May be one of:</span>
<span class="sd">                - valid URL (possible excluding final .owl or .ttl)</span>
<span class="sd">                - file name (possible excluding final .owl or .ttl)</span>
<span class="sd">                - &quot;emmo&quot;: load latest version of asserted EMMO</span>
<span class="sd">                - &quot;emmo-inferred&quot;: load latest version of inferred EMMO</span>
<span class="sd">                  (default)</span>
<span class="sd">                - &quot;emmo-development&quot;: load latest inferred development</span>
<span class="sd">                  version of EMMO. Until first stable release</span>
<span class="sd">                  emmo-inferred and emmo-development will be the same.</span>
<span class="sd">            OntologyClass: If given and `base_iri` doesn&#39;t correspond</span>
<span class="sd">                to an existing ontology, a new ontology is created of</span>
<span class="sd">                this Ontology subclass.  Defaults to `ontopy.Ontology`.</span>
<span class="sd">            label_annotations: Sequence of label IRIs used for accessing</span>
<span class="sd">                entities in the ontology given that they are in the ontology.</span>
<span class="sd">                Label IRIs not in the ontology will need to be added to</span>
<span class="sd">                ontologies in order to be accessible.</span>
<span class="sd">                Defaults to DEFAULT_LABEL_ANNOTATIONS if set to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_iri</span> <span class="o">=</span> <span class="n">base_iri</span><span class="o">.</span><span class="n">as_uri</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base_iri</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="k">else</span> <span class="n">base_iri</span>

        <span class="k">if</span> <span class="n">base_iri</span> <span class="o">==</span> <span class="s2">&quot;emmo&quot;</span><span class="p">:</span>
            <span class="n">base_iri</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;http://emmo-repo.github.io/versions/1.0.0-beta4/emmo.ttl&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">==</span> <span class="s2">&quot;emmo-inferred&quot;</span><span class="p">:</span>
            <span class="n">base_iri</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;https://emmo-repo.github.io/versions/1.0.0-beta4/&quot;</span>
                <span class="s2">&quot;emmo-inferred.ttl&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">==</span> <span class="s2">&quot;emmo-development&quot;</span><span class="p">:</span>
            <span class="n">base_iri</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;https://emmo-repo.github.io/versions/1.0.0-beta4/&quot;</span>
                <span class="s2">&quot;emmo-inferred.ttl&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">base_iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">:</span>
            <span class="n">onto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">[</span><span class="n">base_iri</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;#&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">:</span>
            <span class="n">onto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">[</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;#&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">:</span>
            <span class="n">onto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">[</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_iri</span><span class="p">):</span>
                <span class="n">iri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_iri</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.ttl&quot;</span><span class="p">):</span>
                <span class="n">iri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.ttl&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.owl&quot;</span><span class="p">):</span>
                <span class="n">iri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.owl&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">iri</span> <span class="o">=</span> <span class="n">base_iri</span>

            <span class="k">if</span> <span class="n">iri</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s2">&quot;/#&quot;</span><span class="p">:</span>
                <span class="n">iri</span> <span class="o">+=</span> <span class="s2">&quot;#&quot;</span>

            <span class="k">if</span> <span class="n">OntologyClass</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">OntologyClass</span> <span class="o">=</span> <span class="n">Ontology</span>

            <span class="n">onto</span> <span class="o">=</span> <span class="n">OntologyClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">label_annotations</span><span class="p">:</span>
            <span class="n">onto</span><span class="o">.</span><span class="n">label_annotations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">onto</span>

    <span class="k">def</span> <span class="nf">get_unabbreviated_triples</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
        <span class="c1"># pylint: disable=invalid-name</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all triples unabbreviated.</span>

<span class="sd">        If any of the `subject`, `predicate` or `obj` arguments are given,</span>
<span class="sd">        only matching triples will be returned.</span>

<span class="sd">        If `blank` is given, it will be used to represent blank nodes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_get_unabbreviated_triples</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.World.get_ontology" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_ontology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_iri</span><span class="o">=</span><span class="s1">&#39;emmo-inferred&#39;</span><span class="p">,</span> <span class="n">OntologyClass</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label_annotations</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#ontopy.ontology.World.get_ontology" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns a new Ontology from <code>base_iri</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>base_iri</code></td>
        <td><code>str</code></td>
        <td><p>The base IRI of the ontology. May be one of:
- valid URL (possible excluding final .owl or .ttl)
- file name (possible excluding final .owl or .ttl)
- "emmo": load latest version of asserted EMMO
- "emmo-inferred": load latest version of inferred EMMO
  (default)
- "emmo-development": load latest inferred development
  version of EMMO. Until first stable release
  emmo-inferred and emmo-development will be the same.</p></td>
        <td><code>&#39;emmo-inferred&#39;</code></td>
      </tr>
      <tr>
        <td><code>OntologyClass</code></td>
        <td><code>owlready2.Ontology</code></td>
        <td><p>If given and <code>base_iri</code> doesn't correspond
to an existing ontology, a new ontology is created of
this Ontology subclass.  Defaults to <code>ontopy.Ontology</code>.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>label_annotations</code></td>
        <td><code>Sequence</code></td>
        <td><p>Sequence of label IRIs used for accessing
entities in the ontology given that they are in the ontology.
Label IRIs not in the ontology will need to be added to
ontologies in order to be accessible.
Defaults to DEFAULT_LABEL_ANNOTATIONS if set to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_ontology</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">base_iri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;emmo-inferred&quot;</span><span class="p">,</span>
    <span class="n">OntologyClass</span><span class="p">:</span> <span class="s2">&quot;owlready2.Ontology&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label_annotations</span><span class="p">:</span> <span class="s2">&quot;Sequence&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Ontology&quot;</span><span class="p">:</span>
    <span class="c1"># pylint: disable=too-many-branches</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a new Ontology from `base_iri`.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        base_iri: The base IRI of the ontology. May be one of:</span>
<span class="sd">            - valid URL (possible excluding final .owl or .ttl)</span>
<span class="sd">            - file name (possible excluding final .owl or .ttl)</span>
<span class="sd">            - &quot;emmo&quot;: load latest version of asserted EMMO</span>
<span class="sd">            - &quot;emmo-inferred&quot;: load latest version of inferred EMMO</span>
<span class="sd">              (default)</span>
<span class="sd">            - &quot;emmo-development&quot;: load latest inferred development</span>
<span class="sd">              version of EMMO. Until first stable release</span>
<span class="sd">              emmo-inferred and emmo-development will be the same.</span>
<span class="sd">        OntologyClass: If given and `base_iri` doesn&#39;t correspond</span>
<span class="sd">            to an existing ontology, a new ontology is created of</span>
<span class="sd">            this Ontology subclass.  Defaults to `ontopy.Ontology`.</span>
<span class="sd">        label_annotations: Sequence of label IRIs used for accessing</span>
<span class="sd">            entities in the ontology given that they are in the ontology.</span>
<span class="sd">            Label IRIs not in the ontology will need to be added to</span>
<span class="sd">            ontologies in order to be accessible.</span>
<span class="sd">            Defaults to DEFAULT_LABEL_ANNOTATIONS if set to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_iri</span> <span class="o">=</span> <span class="n">base_iri</span><span class="o">.</span><span class="n">as_uri</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base_iri</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span> <span class="k">else</span> <span class="n">base_iri</span>

    <span class="k">if</span> <span class="n">base_iri</span> <span class="o">==</span> <span class="s2">&quot;emmo&quot;</span><span class="p">:</span>
        <span class="n">base_iri</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;http://emmo-repo.github.io/versions/1.0.0-beta4/emmo.ttl&quot;</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">==</span> <span class="s2">&quot;emmo-inferred&quot;</span><span class="p">:</span>
        <span class="n">base_iri</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;https://emmo-repo.github.io/versions/1.0.0-beta4/&quot;</span>
            <span class="s2">&quot;emmo-inferred.ttl&quot;</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">==</span> <span class="s2">&quot;emmo-development&quot;</span><span class="p">:</span>
        <span class="n">base_iri</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;https://emmo-repo.github.io/versions/1.0.0-beta4/&quot;</span>
            <span class="s2">&quot;emmo-inferred.ttl&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">base_iri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">:</span>
        <span class="n">onto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">[</span><span class="n">base_iri</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;#&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">:</span>
        <span class="n">onto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">[</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;#&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">:</span>
        <span class="n">onto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ontologies</span><span class="p">[</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_iri</span><span class="p">):</span>
            <span class="n">iri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_iri</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.ttl&quot;</span><span class="p">):</span>
            <span class="n">iri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.ttl&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.owl&quot;</span><span class="p">):</span>
            <span class="n">iri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base_iri</span> <span class="o">+</span> <span class="s2">&quot;.owl&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">iri</span> <span class="o">=</span> <span class="n">base_iri</span>

        <span class="k">if</span> <span class="n">iri</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s2">&quot;/#&quot;</span><span class="p">:</span>
            <span class="n">iri</span> <span class="o">+=</span> <span class="s2">&quot;#&quot;</span>

        <span class="k">if</span> <span class="n">OntologyClass</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">OntologyClass</span> <span class="o">=</span> <span class="n">Ontology</span>

        <span class="n">onto</span> <span class="o">=</span> <span class="n">OntologyClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iri</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">label_annotations</span><span class="p">:</span>
        <span class="n">onto</span><span class="o">.</span><span class="n">label_annotations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">label_annotations</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">onto</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="ontopy.ontology.World.get_unabbreviated_triples" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_unabbreviated_triples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#ontopy.ontology.World.get_unabbreviated_triples" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns all triples unabbreviated.</p>
<p>If any of the <code>subject</code>, <code>predicate</code> or <code>obj</code> arguments are given,
only matching triples will be returned.</p>
<p>If <code>blank</code> is given, it will be used to represent blank nodes.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_unabbreviated_triples</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
    <span class="c1"># pylint: disable=invalid-name</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all triples unabbreviated.</span>

<span class="sd">    If any of the `subject`, `predicate` or `obj` arguments are given,</span>
<span class="sd">    only matching triples will be returned.</span>

<span class="sd">    If `blank` is given, it will be used to represent blank nodes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_get_unabbreviated_triples</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="ontopy.ontology.flatten" class="doc doc-heading">
<code class="highlight language-python"><span class="n">flatten</span><span class="p">(</span><span class="n">items</span><span class="p">)</span></code>


<a href="#ontopy.ontology.flatten" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Yield items from any nested iterable.</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Yield items from any nested iterable.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">sub_item</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">sub_item</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">item</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="ontopy.ontology.get_ontology" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_ontology</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#ontopy.ontology.get_ontology" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Returns a new Ontology from <code>base_iri</code>.</p>
<p>This is a convenient function for calling World.get_ontology().</p>

        <details class="quote">
          <summary>Source code in <code>ontopy/ontology.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_ontology</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a new Ontology from `base_iri`.</span>

<span class="sd">    This is a convenient function for calling World.get_ontology().&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">World</span><span class="p">()</span><span class="o">.</span><span class="n">get_ontology</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019-2022 SINTEF
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/emmo-repo" target="_blank" rel="noopener" title="EMMO on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.top", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>